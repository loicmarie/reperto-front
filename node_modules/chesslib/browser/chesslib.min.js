require=function t(e,r,n){function o(a,u){if(!r[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){var r=e[a][1][t];return o(r?r:t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){"use strict";function n(t,e){return"O-O"===t||"O-O-O"===t?f(t,e):l(t,e)}function o(t,e){for(var r,n,o,a,u=$traceurRuntime.assertObject(t),s=u.piece,c=u.target,l=void 0===(r=u.source)?e.pieceCoords(s):r,f=void 0===(n=u.isCapture)?null!=e.pieceByCoords(c):n,h=(void 0===(o=u.promotionPrize)?null:o,[]),p=i(e,null,c,b(s))[$traceurRuntime.toProperty(Symbol.iterator)]();!(a=p.next()).done;){var d=a.value;d!==s&&h.push(e.pieceCoords(d).y===l.y?H(l.y):L(l.x))}return $traceurRuntime.spread([b(s)],D(h),[f?"x":"",W(c)]).join("")}function i(t,e,r){var n,o,i,s,c,l=arguments;return $traceurRuntime.createGeneratorInstance(function(f){for(;;)switch(f.state){case 0:n=void 0!==l[3]?l[3]:"",o=u(n),f.state=15;break;case 15:f.state=o===k?1:12;break;case 1:return f.state=2,p(t);case 2:f.maybeThrow(),f.state=-2;break;case 12:i=a(t,o.brand,e,r)[$traceurRuntime.toProperty(Symbol.iterator)](),f.state=8;break;case 8:f.state=(s=i.next()).done?-2:9;break;case 9:c=s.value,f.state=10;break;case 10:return f.state=6,c;case 6:f.maybeThrow(),f.state=8;break;default:return f.end()}},d,this)}function a(t,e,r,n){var o,i,a,u,s;return $traceurRuntime.createGeneratorInstance(function(c){for(;;)switch(c.state){case 0:o=t.pieces({brand:e,color:t.activeColor})[$traceurRuntime.toProperty(Symbol.iterator)](),c.state=29;break;case 29:c.state=(i=o.next()).done?-2:31;break;case 31:a=i.value,c.state=32;break;case 32:c.pushTry(22,null),c.state=25;break;case 25:throw void 0;case 27:c.popTry(),c.state=29;break;case 22:c.popTry(),s=c.storedException,c.state=20;break;case 20:s=t.pieceCoords(a),c.state=21;break;case 21:c.state=null==r||r.x===s.x||r.y===s.y?14:29;break;case 14:c.pushTry(12,null),c.state=15;break;case 15:t.movePiece(a,n),c.state=6;break;case 6:return c.state=2,a;case 2:c.maybeThrow(),c.state=4;break;case 4:c.popTry(),c.state=29;break;case 12:c.popTry(),u=c.storedException,c.state=9;break;case 9:c.state=u instanceof M?29:8;break;case 8:throw u;default:return c.end()}},m,this)}function u(t){switch(t){case"K":return k;case"Q":return $;case"R":return S;case"B":return C;case"N":return E;case"":return N}}function s(t,e){switch(t){case"Q":return new $({color:e});case"R":return new S({color:e});case"B":return new C({color:e});case"N":return new E({color:e})}}function c(t){return null==t?null:isNaN(Number(t))?new O(B(t),0/0):new O(0/0,K(t))}function l(t,e){var r=$traceurRuntime.assertObject(Q.exec(t)),n=(r[0],r[1]),o=r[2],a=r[3],u=r[4],l=c(o),f=F(a),h=s(u,e.activeColor),r=$traceurRuntime.spread(i(e,l,f,n)),p=r[0],b=r[1];if(null==p)throw new A(t,e);if(null!=b)throw new G(t);var r=$traceurRuntime.assertObject(I.capturablePiece(e,p,f)),d=r.captureTarget,m=r.capturePiece,v=r.isEnPassant;return{piece:p,source:e.pieceCoords(p),target:f,isCapture:null!=m,captureTarget:d,capturePiece:m,isEnPassant:v,promotionPrize:h}}function f(t,e){var r=e.piece({brand:g,color:e.activeColor});return{piece:r,source:e.pieceCoords(r),target:h(t,e),isCapture:!1,capturePiece:null,isEnPassant:!1,promotionPrize:null}}function h(t,e){switch(t){case"O-O":return F(e.activeColor===y?"g1":"g8");case"O-O-O":return F(e.activeColor===y?"c1":"c8")}}function p(t){return t.piece({brand:k.brand,color:t.activeColor})}function b(t){switch(t.brand){case g:return"K";case j:return"Q";case w:return"R";case _:return"B";case P:return"N";case R:return""}}var d=$traceurRuntime.initGeneratorFunction(i),m=$traceurRuntime.initGeneratorFunction(a);Object.defineProperties(r,{Algebraic:{get:function(){return z}},chunker:{get:function(){return Q}},parse:{get:function(){return n}},stringify:{get:function(){return o}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var v=t("./brands"),y=v.WHITE,g=v.KING,j=v.QUEEN,w=v.ROOK,_=v.BISHOP,P=v.KNIGHT,R=v.PAWN,O=t("./point").Point,x=t("./standard"),k=x.King,$=x.Queen,S=x.Rook,C=x.Bishop,E=x.Knight,N=x.Pawn,I=t("./eptarget").EnPassantTarget,T=t("./error"),M=T.ChessError,G=T.AmbiguityError,A=T.MobilityError,q=t("./util"),F=q.squareCoords,K=q.rankIndex,B=q.fileIndex,H=q.rankName,L=q.fileName,W=q.squareName,D=t("lodash.uniq"),z={parse:n,stringify:o,get chunker(){return Q}},Q=/([KQRBN])?([a-h]?[1-8]?)?x?([a-h][1-8])(?:=([QRBN]))?/},{"./brands":3,"./eptarget":5,"./error":6,"./point":16,"./standard":21,"./util":22,"lodash.uniq":53,"traceur/bin/traceur-runtime.js":108}],2:[function(t,e,r){"use strict";function n(){for(var t=void 0!==arguments[0]?arguments[0]:8,e=void 0!==arguments[1]?arguments[1]:8,r=[],n=0;t>n;n++)try{throw void 0}catch(o){o=[];for(var i=0;e>i;i++)o.push(null);r.push(o)}return r}Object.defineProperties(r,{Board:{get:function(){return h}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var o=t("./brands"),i=o.KING,a=o.QUEEN,u=o.KNIGHT,s=o.BISHOP,c=o.ROOK,l=o.PAWN,f=t("./point").Point,h=function(){var t=void 0!==arguments[0]?arguments[0]:8,e=void 0!==arguments[1]?arguments[1]:8,r=arguments[2];this.files=t,this.ranks=e,this.storage=n(t,e),this.pieces=new Set,$traceurRuntime.setProperty(this.pieces,i,new Set),$traceurRuntime.setProperty(this.pieces,a,new Set),$traceurRuntime.setProperty(this.pieces,u,new Set),$traceurRuntime.setProperty(this.pieces,s,new Set),$traceurRuntime.setProperty(this.pieces,c,new Set),$traceurRuntime.setProperty(this.pieces,l,new Set),null!=r&&this.decorate(r)},p=h;$traceurRuntime.createClass(h,{map:function(t){return new p(this.ranks,this.files,this.storage.map(function(e,r){return e.map(function(e,n){return t(e,new f(n,r))})}))},getPieces:function(t){return null==t?this.pieces:this.pieces[$traceurRuntime.toProperty(t)]},getPieceCoords:function(t){for(var e=0,r=this.storage.length;r>e;e++)try{throw void 0}catch(n){n=this.storage[$traceurRuntime.toProperty(e)];for(var o=0,i=n.length;i>o;o++)try{throw void 0}catch(a){if(a=n[$traceurRuntime.toProperty(o)],a&&a===t)return new f(o,e)}}return null},getPieceByCoords:function(t){var e=$traceurRuntime.assertObject(t),r=e.x,n=e.y,o=void 0!==arguments[1]?arguments[1]:!1,i=this.storage[$traceurRuntime.toProperty(o?this.ranks-n-1:n)];return null==i?null:i[$traceurRuntime.toProperty(o?this.files-r-1:r)]},placePiece:function(t,e){var r=$traceurRuntime.assertObject(e),n=r.x,o=r.y;$traceurRuntime.setProperty(this.storage[$traceurRuntime.toProperty(o)],n,t),this.pieces.add(t),this.pieces[$traceurRuntime.toProperty(t.brand)].add(t)},decorate:function(t){var e=this;t.forEach(function(r,n){r.forEach(function(r,o){var i=t[$traceurRuntime.toProperty(n)][$traceurRuntime.toProperty(o)];null!=i&&e.placePiece(i,new f(o,n))})})}},{})},{"./brands":3,"./point":16,"traceur/bin/traceur-runtime.js":108}],3:[function(t,e,r){"use strict";Object.defineProperties(r,{WHITE:{get:function(){return n}},BLACK:{get:function(){return o}},KINGSIDE:{get:function(){return i}},QUEENSIDE:{get:function(){return a}},KING:{get:function(){return u}},QUEEN:{get:function(){return s}},KNIGHT:{get:function(){return c}},BISHOP:{get:function(){return l}},ROOK:{get:function(){return f}},PAWN:{get:function(){return h}},DARK:{get:function(){return p}},LIGHT:{get:function(){return b}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n="white",o="black",i="kingside",a="queenside",u="king",s="queen",c="knight",l="bishop",f="rook",h="pawn",p="dark",b="light"},{"traceur/bin/traceur-runtime.js":108}],4:[function(t,e,r){"use strict";function n(t){var e=g();return String(t||"").split("").forEach(function(t){var r=t.toLowerCase(),n=r===t?p:h;$traceurRuntime.setProperty(e[$traceurRuntime.toProperty(n)],j[$traceurRuntime.toProperty(r)],!0)}),e}function o(t,e){var r=void 0!==arguments[2]?arguments[2]:1;if(t===h){if(e===f)return r;if(e===l)return-r}else if(t===p){if(e===f)return-r;if(e===l)return r}}function i(t,e,r){for(var n,o=t.pieceCoords(t.piece({brand:s,color:e})),i=o.to(o.sum(m.kingOffset(e,r)))[$traceurRuntime.toProperty(Symbol.iterator)]();!(n=i.next()).done;){var a=n.value;if(t.isCheck(e,a))return!1}return!0}Object.defineProperties(r,{Castling:{get:function(){return m}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var a=t("./point").Point,u=t("./brands"),s=u.KING,c=u.ROOK,l=u.QUEENSIDE,f=u.KINGSIDE,h=u.WHITE,p=u.BLACK,b=t("./error").CheckError,d=t("./util").oppositeColor,m=function(t){var e,r,o=$traceurRuntime.assertObject(t),i=void 0===(e=o.fenEncoding)?"":e,a=void 0===(r=o.modes)?n(i):r,u=o.rook,s=o.square;this.modes=a,this.rook=u,this.square=s},v=m;$traceurRuntime.createClass(m,{isLegal:function(t,e){return this.modes[$traceurRuntime.toProperty(t)][$traceurRuntime.toProperty(e)]},toString:function(){var t=this.modes;return[t[$traceurRuntime.toProperty(h)][$traceurRuntime.toProperty(f)]?"K":"",t[$traceurRuntime.toProperty(h)][$traceurRuntime.toProperty(l)]?"Q":"",t[$traceurRuntime.toProperty(p)][$traceurRuntime.toProperty(f)]?"k":"",t[$traceurRuntime.toProperty(p)][$traceurRuntime.toProperty(l)]?"q":""].join("")||"-"}},{analyze:function(t,e,r){var n=$traceurRuntime.assertObject(e),o=n.brand,a=n.color,u=$traceurRuntime.assertObject(t).castling;if(o!==s)return new v({modes:u.modes});var c=v.side(t,e,r),l=g(),f=d(t.activeColor);if($traceurRuntime.setProperty(l,f,t.castling.modes[$traceurRuntime.toProperty(f)]),null==c||!u.isLegal(a,c))return new v({modes:l});if(!i(t,a,c))throw new b;return new v({rook:v.rook(t,a,c),square:t.pieceCoords(e).sum(v.rookOffset(a,c)),modes:l})},side:function(t,e,r){if(e.brand!==s)return null;for(var n,o=[f,l][$traceurRuntime.toProperty(Symbol.iterator)]();!(n=o.next()).done;){var i=n.value;if(v.isCastlingMove(t,e,i,r))return i}return null},rook:function(t,e,r){for(var n,o=$traceurRuntime.assertObject(t.pieceCoords(t.piece({brand:s,color:e}))).x,i=t.pieces({brand:c,color:e})[$traceurRuntime.toProperty(Symbol.iterator)]();!(n=i.next()).done;){var a=n.value;try{throw void 0}catch(u){if(u=$traceurRuntime.assertObject(t.pieceCoords(a)).x,e===h?u>o&&r===f||o>u&&r===l:u>o&&r===l||o>u&&r===f)return a}}},isCastlingMove:function(t,e,r,n){return t.pieceCoords(e).sum(v.kingOffset(e.color,r)).equal(n)},kingOffset:function(t,e){return new a(o(t,e,2),0)},rookOffset:function(t,e){return new a(o(t,e,-1),0).sum(v.kingOffset(t,e))}});var y=function(){var t;return t={},Object.defineProperty(t,f,{value:!1,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,l,{value:!1,configurable:!0,enumerable:!0,writable:!0}),t},g=function(){var t;return t={},Object.defineProperty(t,h,{value:y(),configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,p,{value:y(),configurable:!0,enumerable:!0,writable:!0}),t},j={q:l,k:f}},{"./brands":3,"./error":6,"./point":16,"./util":22,"traceur/bin/traceur-runtime.js":108}],5:[function(t,e,r){"use strict";Object.defineProperties(r,{EnPassantTarget:{get:function(){return u}},NullEnPassantTarget:{get:function(){return c}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=t("./brands").PAWN,o=t("./point").Point,i=t("./util"),a=(i.squareCoords,i.squareName),u=function(){$traceurRuntime.defaultSuperCall(this,s.prototype,arguments)},s=u;$traceurRuntime.createClass(u,{offset:function(){return new o(0,3===this.y?-1:1)},toString:function(){return a(this)}},{fromPoint:function(t){return new s(t.x,t.y)},analyze:function(t,e,r){if(e.brand!==n)return new c;var i=$traceurRuntime.assertObject(r.difference(t.pieceCoords(e))).y;return 2===Math.abs(i)?s.fromPoint(new o(0,-e.reach).sum(r)):new c},capturablePiece:function(t,e,r){if(e.brand!==n||!r.equal(t.enPassantTarget))return{capturePiece:t.pieceByCoords(r),captureTarget:r,isEnPassant:!1};var i=r.sum(new o(0,-e.reach)),a=t.pieceByCoords(i);return null!=a?{capturePiece:a,captureTarget:i,isEnPassant:!0}:void 0},"null":function(){return new c}},o);var c=function(){},l=c;$traceurRuntime.createClass(c,{equal:function(t){return t instanceof l?!0:!1},toString:function(){return"-"}},{},u)},{"./brands":3,"./point":16,"./util":22,"traceur/bin/traceur-runtime.js":108}],6:[function(t,e,r){"use strict";Object.defineProperties(r,{ChessError:{get:function(){return n}},MobilityError:{get:function(){return o}},CheckError:{get:function(){return a}},PromotionError:{get:function(){return s}},ResultError:{get:function(){return l}},AmbiguityError:{get:function(){return h}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=function(t,e){Error.call(this),this.name=this.constructor.name,this.message=null!=t?t:this.name,this.position=e};$traceurRuntime.createClass(n,{},{},Error);var o=function(){$traceurRuntime.defaultSuperCall(this,i.prototype,arguments)},i=o;$traceurRuntime.createClass(o,{},{},n);var a=function(){$traceurRuntime.defaultSuperCall(this,u.prototype,arguments)},u=a;$traceurRuntime.createClass(a,{},{},n);var s=function(){$traceurRuntime.defaultSuperCall(this,c.prototype,arguments)},c=s;$traceurRuntime.createClass(s,{},{},n);var l=function(){$traceurRuntime.defaultSuperCall(this,f.prototype,arguments)},f=l;$traceurRuntime.createClass(l,{},{},n);var h=function(t,e){$traceurRuntime.superCall(this,p.prototype,"constructor",["Ambiguous notation: "+t]),this.rejection=t,this.candidates=e},p=h;$traceurRuntime.createClass(h,{},{},n)},{"traceur/bin/traceur-runtime.js":108}],7:[function(t,e,r){"use strict";function n(t){var e=new I;return t.split("/").forEach(function(t,r){o(t,e,r)}),e}function o(t,e,r){for(var n=(t.split(""),0),o=0;n<e.files;o++){var a=t[$traceurRuntime.toProperty(o)];isNaN(Number(a))?(e.placePiece(i(a),new T(n,r)),n+=1):n+=Number(a)}}function i(t){var e=t.toLowerCase(),r={color:e===t?j:g};switch(e){case"p":return new _(r);case"r":return new P(r);case"n":return new R(r);case"b":return new O(r);case"k":return new x(r);case"q":return new k(r)}}function a(t){switch(t){case"w":return g;case"b":return j}}function u(t){return new $({fenEncoding:t})}function s(t){switch(t){case"-":return C.null();default:return C.fromPoint(G(t))}}function c(t){return null==t?null:Number(t)}function l(t){return[f(t),h(t.activeColor),p(t.castling),b(t.enPassantTarget),d(t.halfmoveClock),m(t.fullmoveCounter)].filter(Boolean).join(" ")}function f(t){for(var e="",r=0;8>r;r++)for(var n=0,o=0;8>n;n++){var i=t.pieceByCoords(new T(n,r));null!=i?(e+=""+(o?o:"")+i.fenEncoding,7===n&&7!==r&&(e+="/"),o=0):(o+=1,7===n&&(e+=""+(o?o:"")+(7!==r?"/":"")))}return e}function h(t){switch(t){case g:return"w";case j:return"b"}}function p(t){return String(t)}function b(t){return null==t||t instanceof E?"-":String(t)}function d(t){return"0"===String(t)?t.source:String(t)}function m(t){return null==t?null:String(t)}function v(t){return new M(null!=t?Number(t):0,t)}Object.defineProperties(r,{FEN:{get:function(){return A}},standard:{get:function(){return q}},standardPosition:{get:function(){return F}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var y=t("./brands"),g=y.WHITE,j=y.BLACK,w=t("./standard"),_=w.Pawn,P=w.Rook,R=w.Knight,O=w.Bishop,x=w.King,k=w.Queen,$=t("./castling").Castling,S=t("./eptarget"),C=S.EnPassantTarget,E=S.NullEnPassantTarget,N=t("./position").Position,I=t("./board").Board,T=t("./point").Point,M=t("./halfmoveclock").HalfmoveClock,G=t("./util").squareCoords,A={parse:function(t){var e=$traceurRuntime.assertObject(t.split(" ")),r=e[0],o=e[1],i=e[2],l=e[3],f=e[4],h=e[5];return new N({board:n(r),activeColor:a(o),castling:u(i),enPassantTarget:s(l),halfmoveClock:v(f),fullmoveCounter:c(h)})},stringify:function(t){return l(t)},get standard(){return q},get standardPosition(){return F}},q="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",F=A.parse(q)},{"./board":2,"./brands":3,"./castling":4,"./eptarget":5,"./halfmoveclock":10,"./point":16,"./position":17,"./standard":21,"./util":22,"traceur/bin/traceur-runtime.js":108}],8:[function(t,e,r){"use strict";function n(){var t=new R;return i(t),u(t),a(t),h(t)}function o(){var t=new R;return i(t,b),i(t,d),a(t),h(t)}function i(t){var e=void 0!==arguments[1]?arguments[1]:b,r=s(e),n=l.bind(null,r,t),o=f("d8");t.placePiece(new j({color:e}),new P(o,r));var i=f("d4"),a=c(o,i)?i+1:i;t.placePiece(new j({color:e}),new P(a,r)),n(new y({color:e}),f("d6"));var u=f("d20");n(new w({color:e}),Math.floor(u/4)),n(new w({color:e}),u%4),n(new g({color:e}),0),n(new v({color:e}),0),n(new g({color:e}),0)}function a(t){for(var e=0;e<t.files;e++)t.placePiece(new _({color:b}),new P(e,6)),t.placePiece(new _({color:d}),new P(e,1))}function u(t){for(var e=void 0!==arguments[1]?arguments[1]:d,r=s(e),n=s(S(e)),o=0;o<t.files;o++)try{throw void 0}catch(i){i=$traceurRuntime.assertObject(t.getPieceByCoords(new P(o,n))).constructor,t.placePiece(new i({color:e}),new P(o,r))}}function s(t){return t===b?7:0}function c(t,e){return k(t)&&k(e)||$(t)&&$(e)}function l(t,e,r,n){for(var o=0,i=0;o<e.files;o++){var a=new P(o,t);null==e.getPieceByCoords(a)&&n===i++&&e.placePiece(r,a)}}function f(t){return new C(t).roll().total-1}function h(t){return O.standardPosition.beget({board:t})}Object.defineProperties(r,{fischerandom:{get:function(){return n}},doubleFischerandom:{get:function(){return o}},ninesixty:{get:function(){return E}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var p=t("./brands"),b=p.WHITE,d=p.BLACK,m=(p.DARK,p.LIGHT,t("./standard")),v=m.King,y=m.Queen,g=m.Rook,j=m.Bishop,w=m.Knight,_=m.Pawn,P=t("./point").Point,R=t("./board").Board,O=t("./fen").FEN,x=t("./util"),k=x.isEven,$=x.isOdd,S=x.oppositeColor,C=t("jsdice"),E=n},{"./board":2,"./brands":3,"./fen":7,"./point":16,"./standard":21,"./util":22,jsdice:24,"traceur/bin/traceur-runtime.js":108}],9:[function(t,e,r){"use strict";Object.defineProperties(r,{Game:{get:function(){return o}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=t("./line").Line,o=function(){$traceurRuntime.superCall(this,i.prototype,"constructor",[]),this.tags=Object.create(null)},i=o;$traceurRuntime.createClass(o,{addTag:function(t,e){$traceurRuntime.setProperty(this.tags,t,e)},finish:function(){this.result}},{},n)},{"./line":12,"traceur/bin/traceur-runtime.js":108}],10:[function(t,e,r){"use strict";Object.defineProperties(r,{HalfmoveClock:{get:function(){return o}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=t("./brands").PAWN,o=function(){var t=void 0!==arguments[0]?arguments[0]:0,e=void 0!==arguments[1]?arguments[1]:null;this.count=t,this.source=e},i=o;$traceurRuntime.createClass(o,{inc:function(){return new i(this.count+1)},toString:function(){return String(this.count)}},{analyze:function(t,e,r){return e.brand===n||null!=t.pieceByCoords(r)?new i(0):t.halfmoveClock.inc()}})},{"./brands":3,"traceur/bin/traceur-runtime.js":108}],11:[function(t,e,r){"use strict";function n(t,e){this.mobility.push(new s(t,e))}Object.defineProperties(r,{Leaper:{get:function(){return n}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var o=t("./point").Point,i=t("./mobility"),a=i.Mobility,u=i.quadrants,s=function(){$traceurRuntime.defaultSuperCall(this,c.prototype,arguments)},c=s;$traceurRuntime.createClass(s,{adjacentPoints:$traceurRuntime.initGeneratorFunction(function l(t,e){var r,n,i,a,s,c,f,h,p;return $traceurRuntime.createGeneratorInstance(function(t){for(;;)switch(t.state){case 0:r=this,n=r.m,i=r.n,t.state=14;break;case 14:a=[new o(n,i),new o(i,n)][$traceurRuntime.toProperty(Symbol.iterator)](),t.state=7;break;case 7:t.state=(s=a.next()).done?-2:9;break;case 9:c=s.value,t.state=10;break;case 10:f=u[$traceurRuntime.toProperty(Symbol.iterator)](),t.state=4;break;case 4:t.state=(h=f.next()).done?7:5;break;case 5:p=h.value,t.state=6;break;case 6:return t.state=2,e.sum(p.product(c));case 2:t.maybeThrow(),t.state=4;break;default:return t.end()}},l,this)})},{},a)},{"./mobility":13,"./point":16,"traceur/bin/traceur-runtime.js":108}],12:[function(t,e,r){"use strict";Object.defineProperties(r,{Line:{get:function(){return i}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=t("./fen").FEN,o=t("./util").last,i=function(){var t=void 0!==arguments[0]?arguments[0]:n.standardPosition;this.position=t,this.ply=[]};$traceurRuntime.createClass(i,{addPly:function(t){this.ply.push(t)},move:function(t){var e=void 0!==arguments[1]?arguments[1]:null,r=this.position.move(t);return this.addPly({position:r,move:t,note:e}),this.position=r,this},annotate:function(t){if(0===this.ply.length)throw new Error("no move to annotate");return o(this.ply).note=t,this},get plyLength(){return this.ply.length},get length(){return Math.ceil(this.ply.length/2)}},{})},{"./fen":7,"./util":22,"traceur/bin/traceur-runtime.js":108}],13:[function(t,e,r){"use strict";function n(t,e,r,n){return r[$traceurRuntime.toProperty(t)](e,e.pieceCoords(r),n)}Object.defineProperties(r,{Mobility:{get:function(){return a}},quadrants:{get:function(){return u}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var o=(t("./brands").PAWN,t("./point").Point),i=t("./util"),a=(i.squareName,i.squareCoords,function(t,e){this.m=t,this.n=e});$traceurRuntime.createClass(a,{test:function(t,e,r){for(var n,o=this.adjacentPoints(t,e)[$traceurRuntime.toProperty(Symbol.iterator)]();!(n=o.next()).done;){var i=n.value;if(r.equal(i))return!0}return!1},adjacentPoints:$traceurRuntime.initGeneratorFunction(function s(){return $traceurRuntime.createGeneratorInstance(function(t){for(;;)switch(t.state){case 0:throw new Error("subclass must override Mobility#adjacentPoints");default:return t.end()}},s,this)})},{isLegal:function(t){var e=$traceurRuntime.assertObject(t),r=e.position,o=e.piece,i=e.target,a=e.capturePiece;return r.activeColor!==o.color?!1:null!=a?o.color===a.color?!1:n("canCapture",r,o,i):n("canMove",r,o,i)}});var u=[new o(1,1),new o(1,-1),new o(-1,1),new o(-1,-1)]},{"./brands":3,"./point":16,"./util":22,"traceur/bin/traceur-runtime.js":108}],14:[function(t,e,r){"use strict";Object.defineProperties(r,{Pawn:{get:function(){return a}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=t("./brands").PAWN,o=t("./piece").Piece,i=t("./point").Point,a=(t("./util").squareName,function(){$traceurRuntime.defaultSuperCall(this,u.prototype,arguments)}),u=a;$traceurRuntime.createClass(a,{get fenEncoding(){return this.isWhite?"P":"p"},get homeRank(){return this.isWhite?6:1},get reach(){return this.isWhite?-1:1},canMove:function(t,e,r){if(e.x!==r.x)return!1;var n=this.reach;return e.y===this.homeRank?r.y===e.y+n||r.y===e.y+2*n&&null==t.pieceByCoords(new i(e.x,e.y+n)):r.y===e.y+n},canCapture:function(t,e,r){return r.y===e.y+this.reach&&(e.x===r.x+1||e.x===r.x-1)}},{get brand(){return n}},o)},{"./brands":3,"./piece":15,"./point":16,"./util":22,"traceur/bin/traceur-runtime.js":108}],15:[function(t,e,r){"use strict";Object.defineProperties(r,{Piece:{get:function(){return a}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=t("./brands"),o=n.WHITE,i=n.BLACK,a=function(){var t=$traceurRuntime.assertObject(void 0!==arguments[0]?arguments[0]:{}).color;this.color=t,this.mobility=[]};$traceurRuntime.createClass(a,{moves:$traceurRuntime.initGeneratorFunction(function u(t){var e,r,n,o,i,a,s;return $traceurRuntime.createGeneratorInstance(function(u){for(;;)switch(u.state){case 0:e=t.pieceCoords(this),u.state=14;break;case 14:r=this.mobility[$traceurRuntime.toProperty(Symbol.iterator)](),u.state=7;break;case 7:u.state=(n=r.next()).done?-2:9;break;case 9:o=n.value,u.state=10;break;case 10:i=o.adjacentPoints(t,e)[$traceurRuntime.toProperty(Symbol.iterator)](),u.state=4;break;case 4:u.state=(a=i.next()).done?7:5;break;case 5:s=a.value,u.state=6;break;case 6:return u.state=2,s;case 2:u.maybeThrow(),u.state=4;break;default:return u.end()}},u,this)}),canMove:function(t,e,r){for(var n,o=this.mobility[$traceurRuntime.toProperty(Symbol.iterator)]();!(n=o.next()).done;){var i=n.value;try{throw void 0}catch(a){if(a=i.test(t,e,r))return!0}}return!1},canCapture:function(t,e,r){return this.canMove(t,e,r)},toString:function(){return this.constructor.name},get isWhite(){return this.color===o},get isBlack(){return this.color===i},get brand(){return this.constructor.brand}},{})},{"./brands":3,"traceur/bin/traceur-runtime.js":108}],16:[function(t,e,r){"use strict";Object.defineProperties(r,{Point:{get:function(){return n}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=function(t,e){this.x=t,this.y=e},o=n;$traceurRuntime.createClass(n,{equal:function(t){var e=$traceurRuntime.assertObject(t),r=e.x,n=e.y;return this.x===r&&this.y===n},sum:function(t){var e=$traceurRuntime.assertObject(t),r=e.x,n=e.y;return new o(this.x+r,this.y+n)},difference:function(t){var e=$traceurRuntime.assertObject(t),r=e.x,n=e.y;return new o(this.x-r,this.y-n)},product:function(t){var e=$traceurRuntime.assertObject(t),r=e.x,n=e.y;return new o(this.x*r,this.y*n)},lt:function(t){var e=$traceurRuntime.assertObject(t),r=e.x,n=e.y;return this.x<r&&this.y<n},lte:function(t){var e=$traceurRuntime.assertObject(t),r=e.x,n=e.y;return this.x<=r&&this.y<=n},gt:function(t){var e=$traceurRuntime.assertObject(t),r=e.x,n=e.y;return this.x>r&&this.y>n},gte:function(t){var e=$traceurRuntime.assertObject(t),r=e.x,n=e.y;return this.x>=r&&this.y>=n},to:$traceurRuntime.initGeneratorFunction(function i(t){var e,r,n,a,u,s,c,l,f;return $traceurRuntime.createGeneratorInstance(function(i){for(;;)switch(i.state){case 0:e=[[Math.min(this.x,t.x),Math.max(this.x,t.x)],[Math.min(this.y,t.y),Math.max(this.y,t.y)]],r=$traceurRuntime.assertObject(e[0]),n=r[0],a=r[1],u=$traceurRuntime.assertObject(e[1]),s=u[0],c=u[1],i.state=12;break;case 12:l=s,i.state=10;break;case 10:i.state=c>l?6:-2;break;case 5:l++,i.state=10;break;case 6:f=n,i.state=7;break;case 7:i.state=a>f?1:5;break;case 4:f++,i.state=7;break;case 1:return i.state=2,new o(f,l);case 2:i.maybeThrow(),i.state=4;break;default:return i.end()}},i,this)})},{})},{"traceur/bin/traceur-runtime.js":108}],17:[function(t,e,r){"use strict";Object.defineProperties(r,{Position:{get:function(){return k}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=t("./brands"),o=n.WHITE,i=n.BLACK,a=n.KING,u=(n.PAWN,n.LIGHT),s=n.DARK,c=t("./board").Board,l=t("./mobility").Mobility,f=t("./castling").Castling,h=t("./eptarget").EnPassantTarget,p=(t("./point").Point,t("./promotion").Promotion),b=t("./algebraic").Algebraic,d=t("./halfmoveclock").HalfmoveClock,m=t("./util"),v=m.entries,y=(m.identity,m.squareName,m.squareCoords),g=m.oppositeColor,j=m.bounded,w=t("./error"),_=w.ChessError,P=w.MobilityError,R=w.CheckError,O=w.PromotionError,x=t("lodash.assign"),k=function(){var t,e,r,n,i,a,u,s,l=$traceurRuntime.assertObject(void 0!==arguments[0]?arguments[0]:{}),f=void 0===(t=l.ranks)?8:t,h=void 0===(e=l.files)?8:e,b=void 0===(r=l.activeColor)?o:r,d=void 0===(n=l.castling)?null:n,m=void 0===(i=l.enPassantTarget)?null:i,v=void 0===(a=l.halfmoveClock)?null:a,y=void 0===(u=l.fullmoveCounter)?0:u,g=void 0===(s=l.board)?new c(f,h):s;this.board=g,this.activeColor=b,this.castling=d,this.enPassantTarget=m,this.halfmoveClock=v,this.fullmoveCounter=y,this.promotionSquare=p.square(this)},$=k;$traceurRuntime.createClass(k,{beget:function(t){return new $(x({},this,t))},get files(){return this.board.files},get ranks(){return this.board.ranks},material:function(t){return this.board.getPieces(t)},pieceBySquare:function(t){return this.pieceByCoords(y(t))},pieceCoords:function(t){return this.board.getPieceCoords(t)},pieceByCoords:function(t){var e=void 0!==arguments[1]?arguments[1]:!1;return this.board.getPieceByCoords(t,e)},pieces:$traceurRuntime.initGeneratorFunction(function S(){var t,e,r,n,o,i,a,u,s,c=arguments;return $traceurRuntime.createGeneratorInstance(function(l){for(;;)switch(l.state){case 0:t=void 0!==c[0]?c[0]:{},l.state=20;break;case 20:e=this.material(t.brand)[$traceurRuntime.toProperty(Symbol.iterator)](),l.state=2;break;case 2:l.state=(r=e.next()).done?-2:15;break;case 15:n=r.value,l.state=16;break;case 16:o=v(t)[$traceurRuntime.toProperty(Symbol.iterator)](),l.state=5;break;case 5:l.state=(i=o.next()).done?9:7;break;case 7:a=$traceurRuntime.assertObject(i.value),u=a[0],s=a[1],l.state=8;break;case 8:l.state=n[$traceurRuntime.toProperty(s)]!==u?2:5;break;case 9:return l.state=12,n;case 12:l.maybeThrow(),l.state=2;break;default:return l.end()}},S,this)}),piece:function(t){for(var e,r=this.pieces(t)[$traceurRuntime.toProperty(Symbol.iterator)]();!(e=r.next()).done;){var n=e.value;return n}return null},all:function(t){return $traceurRuntime.spread(this.pieces(t))},checks:$traceurRuntime.initGeneratorFunction(function C(){var t,e,r,n,o,i=arguments;return $traceurRuntime.createGeneratorInstance(function(u){for(;;)switch(u.state){case 0:t=void 0!==i[0]?i[0]:this.activeColor,e=void 0!==i[1]?i[1]:this.pieceCoords(this.piece({brand:a,color:t})),u.state=11;break;case 11:r=this.pieces({color:g(t)})[$traceurRuntime.toProperty(Symbol.iterator)](),u.state=4;break;case 4:u.state=(n=r.next()).done?-2:6;break;case 6:o=n.value,u.state=7;break;case 7:u.state=o.canCapture(this,this.pieceCoords(o),e)?1:4;break;case 1:return u.state=2,o;case 2:u.maybeThrow(),u.state=4;break;default:return u.end()}},C,this)}),moves:$traceurRuntime.initGeneratorFunction(function E(){var t,e,r,n,o,i,a,u=arguments;return $traceurRuntime.createGeneratorInstance(function(s){for(;;)switch(s.state){case 0:t=void 0!==u[0]?u[0]:this.activeColor,s.state=14;break;case 14:e=this.pieces({color:t})[$traceurRuntime.toProperty(Symbol.iterator)](),s.state=7;break;case 7:s.state=(r=e.next()).done?-2:9;break;case 9:n=r.value,s.state=10;break;case 10:o=j(this.board,n.moves(this))[$traceurRuntime.toProperty(Symbol.iterator)](),s.state=4;break;case 4:s.state=(i=o.next()).done?7:5;break;case 5:a=i.value,s.state=6;break;case 6:return s.state=2,{piece:n,move:a};case 2:s.maybeThrow(),s.state=4;break;default:return s.end()}},E,this)}),isCheck:function(t,e){for(var r,n=this.checks(t,e)[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=n.next()).done;){{r.value}return!0}return!1},isCheckmate:function(){var t=this.activeColor;if(!this.isCheck(t))return!1;for(var e,r=this.moves()[$traceurRuntime.toProperty(Symbol.iterator)]();!(e=r.next()).done;)try{throw void 0}catch(n){try{throw void 0}catch(o){try{throw void 0}catch(i){i=$traceurRuntime.assertObject(e.value),o=i.piece,n=i.move;try{if(!this.movePiece(o,n).isCheck(t))return!1}catch(a){if(a instanceof _)continue;throw a}}}}return!0},is50MoveDraw:function(){return this.halfmoveClock.count>=100},isCheckmatePossible:function(){var t=this.all(),e=t.filter(function(t){return t.brand===a}),r=t.filter(function(t){return t.brand!==a});return 2!==e.length||2===t.length||3===t.length&&r[0].brand===KNIGHT||r.every(function(t){var e=$traceurRuntime.assertObject(t).brand;return e===BISHOP})&&(r.every(function(t){return squareColor(position.pieceCoords(t))===u})||r.every(function(t){return squareColor(position.pieceCoords(t))===s}))?!1:!0},tryMovePiece:function(t,e){try{return this.movePiece(t,e)}catch(r){if(r instanceof _)return this;throw r}},movePiece:function(t,e){if(null==e||null==t)throw new Error("Argument error");var r=$traceurRuntime.assertObject(h.capturablePiece(this,t,e)),n=r.capturePiece,o=r.captureTarget,a=r.isEnPassant;if(!l.isLegal({position:this,piece:t,target:e,capturePiece:n}))throw new P;var u=f.analyze(this,t,e),s=this.beget({activeColor:g(this.activeColor),castling:u,enPassantTarget:h.analyze(this,t,e),halfmoveClock:d.analyze(this,t,e),fullmoveCounter:this.activeColor===i?this.fullmoveCounter+1:this.fullmoveCounter,board:this.board.map(function(r,n){return r===t||a&&n.equal(o)||r&&r===u.rook?null:u.square&&n.equal(u.square)?u.rook:n.equal(e)?t:r})});if(s.isCheck(this.activeColor))throw new R;return s},promote:function(t){var e=this;if(null==this.promotionSquare)throw new O;return this.beget({board:this.board.map(function(r,n){return n.equal(e.promotionSquare)?t:r}),promotionSquare:null})},move:function(t){var e=$traceurRuntime.assertObject(b.parse(t,this)),r=e.piece,n=e.target,o=e.promotionPrize,i=this.movePiece(r,n);
return null!=o?i.promote(o):i}},{})},{"./algebraic":1,"./board":2,"./brands":3,"./castling":4,"./eptarget":5,"./error":6,"./halfmoveclock":10,"./mobility":13,"./point":16,"./promotion":18,"./util":22,"lodash.assign":25,"traceur/bin/traceur-runtime.js":108}],18:[function(t,e,r){"use strict";Object.defineProperties(r,{Promotion:{get:function(){return s}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=t("./brands"),o=n.WHITE,i=n.BLACK,a=n.PAWN,u=t("./util").oppositeColor,s={square:function(t){for(var e,r=u(t.activeColor),n=t.pieces({brand:a,color:r})[$traceurRuntime.toProperty(Symbol.iterator)]();!(e=n.next()).done;){var o=e.value;try{throw void 0}catch(i){if(i=t.pieceCoords(o),i.y===s.rank(r))return i}}return null},rank:function(t){switch(t){case o:return 0;case i:return 7}}}},{"./brands":3,"./util":22,"traceur/bin/traceur-runtime.js":108}],19:[function(t,e,r){"use strict";function n(t,e){this.mobility.push(new s(t,e))}Object.defineProperties(r,{Rider:{get:function(){return n}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var o=t("./point").Point,i=t("./mobility"),a=i.Mobility,u=i.quadrants,s=function(){$traceurRuntime.defaultSuperCall(this,c.prototype,arguments)},c=s;$traceurRuntime.createClass(s,{adjacentPoints:$traceurRuntime.initGeneratorFunction(function l(t,e){var r,n,i,a,s,c,f,h,p,b,d;return $traceurRuntime.createGeneratorInstance(function(l){for(;;)switch(l.state){case 0:r=this,n=r.m,i=r.n,l.state=34;break;case 34:a=[new o(n,i),new o(i,n)][$traceurRuntime.toProperty(Symbol.iterator)](),l.state=3;break;case 3:l.state=(s=a.next()).done?-2:29;break;case 29:c=s.value,l.state=30;break;case 30:f=u[$traceurRuntime.toProperty(Symbol.iterator)](),l.state=2;break;case 2:l.state=(h=f.next()).done?3:25;break;case 25:p=h.value,l.state=26;break;case 26:b=1,l.state=24;break;case 24:l.state=8>b?15:2;break;case 20:b++,l.state=24;break;case 15:l.pushTry(13,null),l.state=16;break;case 16:throw void 0;case 18:l.popTry(),l.state=20;break;case 13:l.popTry(),d=l.storedException,l.state=11;break;case 11:d=e.sum(p.product(c.product(new o(b,b)))),l.state=12;break;case 12:return l.state=5,d;case 5:l.maybeThrow(),l.state=7;break;case 7:l.state=null!=t.pieceByCoords(d)?2:20;break;default:return l.end()}},l,this)})},{},a)},{"./mobility":13,"./point":16,"traceur/bin/traceur-runtime.js":108}],20:[function(t,e,r){"use strict";function n(){this.mobility.push(new h(1,0)),this.mobility.push(new h(1,1)),this.mobility.push(new b(this.color,i)),this.mobility.push(new b(this.color,a))}Object.defineProperties(r,{Royal:{get:function(){return n}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var o=t("./brands"),i=o.KINGSIDE,a=o.QUEENSIDE,u=t("./point").Point,s=t("./mobility"),c=s.Mobility,l=s.quadrants,f=t("./castling").Castling,h=function(){$traceurRuntime.defaultSuperCall(this,p.prototype,arguments)},p=h;$traceurRuntime.createClass(h,{adjacentPoints:$traceurRuntime.initGeneratorFunction(function d(t,e){var r,n,o,i,a,s,c,f,h;return $traceurRuntime.createGeneratorInstance(function(t){for(;;)switch(t.state){case 0:r=this,n=r.m,o=r.n,t.state=14;break;case 14:i=[new u(n,o),new u(o,n)][$traceurRuntime.toProperty(Symbol.iterator)](),t.state=7;break;case 7:t.state=(a=i.next()).done?-2:9;break;case 9:s=a.value,t.state=10;break;case 10:c=l[$traceurRuntime.toProperty(Symbol.iterator)](),t.state=4;break;case 4:t.state=(f=c.next()).done?7:5;break;case 5:h=f.value,t.state=6;break;case 6:return t.state=2,e.sum(h.product(s));case 2:t.maybeThrow(),t.state=4;break;default:return t.end()}},d,this)})},{},c);var b=function(t,e){this.color=t,this.side=e};$traceurRuntime.createClass(b,{adjacentPoints:$traceurRuntime.initGeneratorFunction(function m(t,e){return $traceurRuntime.createGeneratorInstance(function(r){for(;;)switch(r.state){case 0:r.state=t.castling.isLegal(this.color,this.side)?1:-2;break;case 1:return r.state=2,e.sum(f.kingOffset(this.color,this.side));case 2:r.maybeThrow(),r.state=-2;break;default:return r.end()}},m,this)})},{},c)},{"./brands":3,"./castling":4,"./mobility":13,"./point":16,"traceur/bin/traceur-runtime.js":108}],21:[function(t,e,r){"use strict";Object.defineProperties(r,{Pawn:{get:function(){return p.Pawn}},King:{get:function(){return b}},Queen:{get:function(){return m}},Rook:{get:function(){return y}},Bishop:{get:function(){return j}},Knight:{get:function(){return _}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=t("./brands"),o=n.KING,i=n.QUEEN,a=n.KNIGHT,u=n.BISHOP,s=n.ROOK,c=t("./piece").Piece,l=t("./leaper").Leaper,f=t("./rider").Rider,h=t("./royal").Royal,p=t("./pawn"),b=function(t){$traceurRuntime.superCall(this,d.prototype,"constructor",[t]),h.call(this)},d=b;$traceurRuntime.createClass(b,{canCapture:function(t,e,r){for(var n,o=[this.mobility[0],this.mobility[1]][$traceurRuntime.toProperty(Symbol.iterator)]();!(n=o.next()).done;){var i=n.value;try{throw void 0}catch(a){if(a=i.test(t,e,r))return!0}}return!1},get fenEncoding(){return this.isWhite?"K":"k"}},{get brand(){return o}},c);var m=function(t){$traceurRuntime.superCall(this,v.prototype,"constructor",[t]),f.call(this,1,0),f.call(this,1,1)},v=m;$traceurRuntime.createClass(m,{get fenEncoding(){return this.isWhite?"Q":"q"}},{get brand(){return i}},c);var y=function(t){$traceurRuntime.superCall(this,g.prototype,"constructor",[t]),f.call(this,1,0)},g=y;$traceurRuntime.createClass(y,{get fenEncoding(){return this.isWhite?"R":"r"}},{get brand(){return s}},c);var j=function(t){$traceurRuntime.superCall(this,w.prototype,"constructor",[t]),f.call(this,1,1)},w=j;$traceurRuntime.createClass(j,{get fenEncoding(){return this.isWhite?"B":"b"}},{get brand(){return u}},c);var _=function(t){$traceurRuntime.superCall(this,P.prototype,"constructor",[t]),l.call(this,1,2)},P=_;$traceurRuntime.createClass(_,{get fenEncoding(){return this.isWhite?"N":"n"}},{get brand(){return a}},c)},{"./brands":3,"./leaper":11,"./pawn":14,"./piece":15,"./rider":19,"./royal":20,"traceur/bin/traceur-runtime.js":108}],22:[function(t,e,r){"use strict";function n(t){var e,r,n,o,a;return $traceurRuntime.createGeneratorInstance(function(i){for(;;)switch(i.state){case 0:e=[],r=t;for(n in r)e.push(n);i.state=14;break;case 14:o=0,i.state=12;break;case 12:i.state=o<e.length?8:-2;break;case 4:o++,i.state=12;break;case 8:a=e[$traceurRuntime.toProperty(o)],i.state=9;break;case 9:i.state=$traceurRuntime.toProperty(a)in r?6:4;break;case 6:return i.state=2,[t[$traceurRuntime.toProperty(a)],a];case 2:i.maybeThrow(),i.state=4;break;default:return i.end()}},i,this)}function o(t,e){var r,n,o,i,u,s;return $traceurRuntime.createGeneratorInstance(function(a){for(;;)switch(a.state){case 0:r=$traceurRuntime.assertObject(t),n=r.files,o=r.ranks,a.state=11;break;case 11:i=e[$traceurRuntime.toProperty(Symbol.iterator)](),a.state=4;break;case 4:a.state=(u=i.next()).done?-2:6;break;case 6:s=u.value,a.state=7;break;case 7:a.state=new h(0,0).lte(s)&&new h(n,o).gt(s)?1:4;break;case 1:return a.state=2,s;case 2:a.maybeThrow(),a.state=4;break;default:return a.end()}},a,this)}var i=$traceurRuntime.initGeneratorFunction(n),a=$traceurRuntime.initGeneratorFunction(o);Object.defineProperties(r,{entries:{get:function(){return n}},bounded:{get:function(){return o}},identity:{get:function(){return b}},squareName:{get:function(){return d}},fileName:{get:function(){return m}},rankName:{get:function(){return v}},fileIndex:{get:function(){return y}},rankIndex:{get:function(){return g}},squareCoords:{get:function(){return j}},squareCoordsByName:{get:function(){return w}},oppositeColor:{get:function(){return _}},squareColor:{get:function(){return P}},isEven:{get:function(){return R}},isOdd:{get:function(){return O}},partition:{get:function(){return x}},last:{get:function(){return k}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var u=t("./brands"),s=u.WHITE,c=u.BLACK,l=u.LIGHT,f=u.DARK,h=t("./point").Point,p=t("lodash.isnumber"),b=function(t){return t},d=function(t){var e=$traceurRuntime.assertObject(t),r=e.x,n=e.y;return""+m(r)+v(n)},m=function(t){return"abcdefgh".charAt(t)},v=function(t){var e=void 0!==arguments[1]?arguments[1]:8;return String(e-t)},y=function(t){return"abcdefgh".indexOf(t)},g=function(t){var e=void 0!==arguments[1]?arguments[1]:8;return e-Number(t)},j=function(t){var e=$traceurRuntime.assertObject(t.split("")),r=e[0],n=e[1];return w(r,n)},w=function(t,e){return new h(y(t),g(e))},_=function(t){return t===s?c:s},P=function(t){var e=$traceurRuntime.assertObject(t),r=e.x,n=e.y;return R(r)&&R(n)||O(r)&&O(n)?l:f},R=function(t){return p(t)&&t%2===0},O=function(t){return!R(t)},x=function(t,e){for(var r,n=[[],[]],o=t[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=o.next()).done;){var i=r.value;n[$traceurRuntime.toProperty(+!e(i))].push(i)}return n},k=function(t){return t[$traceurRuntime.toProperty(t.length-1)]}},{"./brands":3,"./point":16,"lodash.isnumber":52,"traceur/bin/traceur-runtime.js":108}],23:[function(t,e){function r(){}var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var r=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],24:[function(t,e){function r(t,e){return String.prototype.replace.call(t,/{([^{}]*)}/g,function(t,r){var n=e[r];return"string"==typeof n||"number"==typeof n?n:t})}var n=function(t,e){this.phrase=t,this.dice=[],this.named_dice=[],this.parse(e)};(function(){this.parse=function(t){var e=this.phrase;"undefined"!=typeof t&&(e=r(e,t));for(var e=e.replace(/- */,"+ -"),e=e.replace(/D/,"d"),n=/ *\+ */,o=e.split(n),i=0;i<o.length;i++){var a=o[i].match(/^[ \t]*(-)?(\d+)?(?:(d)(\d+))?[ \t]*$/);if(!a)return null;var u=a[1]?-1:1,s=parseInt(a[2]||"1"),c=parseInt(a[4]||"0");a[3]?(this.dice.push([u,s,c]),this.named_dice.push(u*s+"d"+c)):(this.dice.push([u,s]),this.named_dice.push(u*s))}},this.roll=function(){var t,e,r,n=0,o=[];for(var i in this.dice)if(t=this.dice[i],3===t.length)for(e=1;e<=t[1];e++)r=t[0]*Math.ceil(t[2]*Math.random()),o.push(r),n+=r;else r=t[0]*t[1],o.push(r),n+=r;return{results:o,total:n}}}).call(n.prototype),e.exports=n},{}],25:[function(t,e){var r=t("lodash._basecreatecallback"),n=t("lodash.keys"),o=t("lodash._objecttypes"),i=function(t,e,i){var a,u=t,s=u;if(!u)return s;var c=arguments,l=0,f="number"==typeof i?2:c.length;if(f>3&&"function"==typeof c[f-2])var h=r(c[--f-1],c[f--],2);else f>2&&"function"==typeof c[f-1]&&(h=c[--f]);for(;++l<f;)if(u=c[l],u&&o[typeof u])for(var p=-1,b=o[typeof u]&&n(u),d=b?b.length:0;++p<d;)a=b[p],s[a]=h?h(s[a],u[a]):u[a];return s};e.exports=i},{"lodash._basecreatecallback":26,"lodash._objecttypes":47,"lodash.keys":48}],26:[function(t,e){function r(t,e,r){if("function"!=typeof t)return o;if("undefined"==typeof e||!("prototype"in t))return t;var l=t.__bindData__;if("undefined"==typeof l&&(a.funcNames&&(l=!t.name),l=l||!a.funcDecomp,!l)){var f=c.call(t);a.funcNames||(l=!u.test(f)),l||(l=s.test(f),i(t,l))}if(l===!1||l!==!0&&1&l[1])return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)};case 4:return function(r,n,o,i){return t.call(e,r,n,o,i)}}return n(t,e)}var n=t("lodash.bind"),o=t("lodash.identity"),i=t("lodash._setbinddata"),a=t("lodash.support"),u=/^\s*function[ \n\r\t]+\w/,s=/\bthis\b/,c=Function.prototype.toString;e.exports=r},{"lodash._setbinddata":27,"lodash.bind":30,"lodash.identity":44,"lodash.support":45}],27:[function(t,e){var r=t("lodash._isnative"),n=t("lodash.noop"),o={configurable:!1,enumerable:!1,value:null,writable:!1},i=function(){try{var t={},e=r(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(o){}return n}(),a=i?function(t,e){o.value=e,i(t,"__bindData__",o)}:n;e.exports=a},{"lodash._isnative":28,"lodash.noop":29}],28:[function(t,e){function r(t){return"function"==typeof t&&i.test(t)}var n=Object.prototype,o=n.toString,i=RegExp("^"+String(o).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");e.exports=r},{}],29:[function(t,e){function r(){}e.exports=r},{}],30:[function(t,e){function r(t,e){return arguments.length>2?n(t,17,o(arguments,2),null,e):n(t,1,null,null,e)}var n=t("lodash._createwrapper"),o=t("lodash._slice");e.exports=r},{"lodash._createwrapper":31,"lodash._slice":43}],31:[function(t,e){function r(t,e,u,l,f,h){var p=1&e,b=2&e,d=4&e,m=16&e,v=32&e;if(!b&&!i(t))throw new TypeError;m&&!u.length&&(e&=-17,m=u=!1),v&&!l.length&&(e&=-33,v=l=!1);var y=t&&t.__bindData__;if(y&&y!==!0)return y=a(y),y[2]&&(y[2]=a(y[2])),y[3]&&(y[3]=a(y[3])),!p||1&y[1]||(y[4]=f),!p&&1&y[1]&&(e|=8),!d||4&y[1]||(y[5]=h),m&&s.apply(y[2]||(y[2]=[]),u),v&&c.apply(y[3]||(y[3]=[]),l),y[1]|=e,r.apply(null,y);var g=1==e||17===e?n:o;return g([t,e,u,l,f,h])}var n=t("lodash._basebind"),o=t("lodash._basecreatewrapper"),i=t("lodash.isfunction"),a=t("lodash._slice"),u=[],s=u.push,c=u.unshift;e.exports=r},{"lodash._basebind":32,"lodash._basecreatewrapper":37,"lodash._slice":43,"lodash.isfunction":42}],32:[function(t,e){function r(t){function e(){if(u){var t=a(u);s.apply(t,arguments)}if(this instanceof e){var i=n(r.prototype),l=r.apply(i,t||arguments);return o(l)?l:i}return r.apply(c,t||arguments)}var r=t[0],u=t[2],c=t[4];return i(e,t),e}var n=t("lodash._basecreate"),o=t("lodash.isobject"),i=t("lodash._setbinddata"),a=t("lodash._slice"),u=[],s=u.push;e.exports=r},{"lodash._basecreate":33,"lodash._setbinddata":27,"lodash._slice":43,"lodash.isobject":36}],33:[function(t,e){(function(r){function n(t){return i(t)?a(t):{}}var o=t("lodash._isnative"),i=t("lodash.isobject"),a=(t("lodash.noop"),o(a=Object.create)&&a);a||(n=function(){function t(){}return function(e){if(i(e)){t.prototype=e;var n=new t;t.prototype=null}return n||r.Object()}}()),e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._isnative":34,"lodash.isobject":36,"lodash.noop":35}],34:[function(t,e){e.exports=t(28)},{}],35:[function(t,e){e.exports=t(29)},{}],36:[function(t,e){function r(t){return!(!t||!n[typeof t])}var n=t("lodash._objecttypes");e.exports=r},{"lodash._objecttypes":47}],37:[function(t,e){function r(t){function e(){var t=b?h:this;if(l){var i=a(l);s.apply(i,arguments)}if((f||m)&&(i||(i=a(arguments)),f&&s.apply(i,f),m&&i.length<p))return c|=16,r([u,v?c:-4&c,i,null,h,p]);if(i||(i=arguments),d&&(u=t[y]),this instanceof e){t=n(u.prototype);var g=u.apply(t,i);return o(g)?g:t}return u.apply(t,i)}var u=t[0],c=t[1],l=t[2],f=t[3],h=t[4],p=t[5],b=1&c,d=2&c,m=4&c,v=8&c,y=u;return i(e,t),e}var n=t("lodash._basecreate"),o=t("lodash.isobject"),i=t("lodash._setbinddata"),a=t("lodash._slice"),u=[],s=u.push;e.exports=r},{"lodash._basecreate":38,"lodash._setbinddata":27,"lodash._slice":43,"lodash.isobject":41}],38:[function(t,e){e.exports=t(33)},{"lodash._isnative":39,"lodash.isobject":41,"lodash.noop":40}],39:[function(t,e){e.exports=t(28)},{}],40:[function(t,e){e.exports=t(29)},{}],41:[function(t,e){e.exports=t(36)},{"lodash._objecttypes":47}],42:[function(t,e){function r(t){return"function"==typeof t}e.exports=r},{}],43:[function(t,e){function r(t,e,r){e||(e=0),"undefined"==typeof r&&(r=t?t.length:0);for(var n=-1,o=r-e||0,i=Array(0>o?0:o);++n<o;)i[n]=t[e+n];return i}e.exports=r},{}],44:[function(t,e){function r(t){return t}e.exports=r},{}],45:[function(t,e){(function(r){var n=t("lodash._isnative"),o=/\bthis\b/,i={};i.funcDecomp=!n(r.WinRTError)&&o.test(function(){return this}),i.funcNames="string"==typeof Function.name,e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._isnative":46}],46:[function(t,e){e.exports=t(28)},{}],47:[function(t,e){var r={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};e.exports=r},{}],48:[function(t,e){var r=t("lodash._isnative"),n=t("lodash.isobject"),o=t("lodash._shimkeys"),i=r(i=Object.keys)&&i,a=i?function(t){return n(t)?i(t):[]}:o;e.exports=a},{"lodash._isnative":49,"lodash._shimkeys":50,"lodash.isobject":51}],49:[function(t,e){e.exports=t(28)},{}],50:[function(t,e){var r=t("lodash._objecttypes"),n=Object.prototype,o=n.hasOwnProperty,i=function(t){var e,n=t,i=[];if(!n)return i;if(!r[typeof t])return i;for(e in n)o.call(n,e)&&i.push(e);return i};e.exports=i},{"lodash._objecttypes":47}],51:[function(t,e){e.exports=t(36)},{"lodash._objecttypes":47}],52:[function(t,e){function r(t){return"number"==typeof t||t&&"object"==typeof t&&i.call(t)==n||!1}var n="[object Number]",o=Object.prototype,i=o.toString;e.exports=r},{}],53:[function(t,e){function r(t,e,r,i){return"boolean"!=typeof e&&null!=e&&(i=r,r="function"!=typeof e&&i&&i[e]===t?null:e,e=!1),null!=r&&(r=o(r,i,3)),n(t,e,r)}var n=t("lodash._baseuniq"),o=t("lodash.createcallback");e.exports=r},{"lodash._baseuniq":54,"lodash.createcallback":72}],54:[function(t,e){function r(t,e,r){var l=-1,f=n,h=t?t.length:0,p=[],b=!e&&h>=u,d=r||b?a():p;if(b){var m=i(d);f=o,d=m}for(;++l<h;){var v=t[l],y=r?r(v,l,t):v;(e?!l||d[d.length-1]!==y:f(d,y)<0)&&((r||b)&&d.push(y),p.push(v))}return b?(s(d.array),c(d)):r&&s(d),p}var n=t("lodash._baseindexof"),o=t("lodash._cacheindexof"),i=t("lodash._createcache"),a=t("lodash._getarray"),u=t("lodash._largearraysize"),s=t("lodash._releasearray"),c=t("lodash._releaseobject");e.exports=r},{"lodash._baseindexof":55,"lodash._cacheindexof":56,"lodash._createcache":58,"lodash._getarray":63,"lodash._largearraysize":65,"lodash._releasearray":66,"lodash._releaseobject":69}],55:[function(t,e){function r(t,e,r){for(var n=(r||0)-1,o=t?t.length:0;++n<o;)if(t[n]===e)return n;return-1}e.exports=r},{}],56:[function(t,e){function r(t,e){var r=typeof e;if(t=t.cache,"boolean"==r||null==e)return t[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?e:o+e;return t=(t=t[r])&&t[i],"object"==r?t&&n(t,e)>-1?0:-1:t?0:-1}var n=t("lodash._baseindexof"),o=t("lodash._keyprefix");e.exports=r},{"lodash._baseindexof":55,"lodash._keyprefix":57}],57:[function(t,e){var r="__1335248838000__";e.exports=r},{}],58:[function(t,e){function r(t){var e=-1,r=t.length,i=t[0],a=t[r/2|0],u=t[r-1];if(i&&"object"==typeof i&&a&&"object"==typeof a&&u&&"object"==typeof u)return!1;var s=o();s["false"]=s["null"]=s["true"]=s.undefined=!1;var c=o();for(c.array=t,c.cache=s,c.push=n;++e<r;)c.push(t[e]);return c}{var n=t("lodash._cachepush"),o=t("lodash._getobject");t("lodash._releaseobject")}e.exports=r},{"lodash._cachepush":59,"lodash._getobject":61,"lodash._releaseobject":69}],59:[function(t,e){function r(t){var e=this.cache,r=typeof t;if("boolean"==r||null==t)e[t]=!0;else{"number"!=r&&"string"!=r&&(r="object");var o="number"==r?t:n+t,i=e[r]||(e[r]={});"object"==r?(i[o]||(i[o]=[])).push(t):i[o]=!0}}var n=t("lodash._keyprefix");e.exports=r},{"lodash._keyprefix":60}],60:[function(t,e){e.exports=t(57)},{}],61:[function(t,e){function r(){return n.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}var n=t("lodash._objectpool");e.exports=r},{"lodash._objectpool":62}],62:[function(t,e){var r=[];e.exports=r},{}],63:[function(t,e){function r(){return n.pop()||[]}var n=t("lodash._arraypool");e.exports=r},{"lodash._arraypool":64}],64:[function(t,e){var r=[];e.exports=r},{}],65:[function(t,e){var r=75;e.exports=r},{}],66:[function(t,e){function r(t){t.length=0,n.length<o&&n.push(t)}var n=t("lodash._arraypool"),o=t("lodash._maxpoolsize");e.exports=r},{"lodash._arraypool":67,"lodash._maxpoolsize":68}],67:[function(t,e){e.exports=t(64)},{}],68:[function(t,e){var r=40;e.exports=r},{}],69:[function(t,e){function r(t){var e=t.cache;e&&r(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,o.length<n&&o.push(t)}var n=t("lodash._maxpoolsize"),o=t("lodash._objectpool");e.exports=r},{"lodash._maxpoolsize":70,"lodash._objectpool":71}],70:[function(t,e){e.exports=t(68)},{}],71:[function(t,e){e.exports=t(62)},{}],72:[function(t,e){function r(t,e,r){var s=typeof t;if(null==t||"function"==s)return n(t,e,r);if("object"!=s)return u(t);var c=a(t),l=c[0],f=t[l];return 1!=c.length||f!==f||i(f)?function(e){for(var r=c.length,n=!1;r--&&(n=o(e[c[r]],t[c[r]],null,!0)););return n}:function(t){var e=t[l];return f===e&&(0!==f||1/f==1/e)}}var n=t("lodash._basecreatecallback"),o=t("lodash._baseisequal"),i=t("lodash.isobject"),a=t("lodash.keys"),u=t("lodash.property");e.exports=r},{"lodash._basecreatecallback":73,"lodash._baseisequal":92,"lodash.isobject":101,"lodash.keys":103,"lodash.property":107}],73:[function(t,e){e.exports=t(26)},{"lodash._setbinddata":74,"lodash.bind":77,"lodash.identity":89,"lodash.support":90}],74:[function(t,e){e.exports=t(27)},{"lodash._isnative":75,"lodash.noop":76}],75:[function(t,e){e.exports=t(28)},{}],76:[function(t,e){e.exports=t(29)},{}],77:[function(t,e){e.exports=t(30)},{"lodash._createwrapper":78,"lodash._slice":88}],78:[function(t,e){e.exports=t(31)},{"lodash._basebind":79,"lodash._basecreatewrapper":83,"lodash._slice":88,"lodash.isfunction":87}],79:[function(t,e){e.exports=t(32)},{"lodash._basecreate":80,"lodash._setbinddata":74,"lodash._slice":88,"lodash.isobject":101}],80:[function(t,e){e.exports=t(33)},{"lodash._isnative":81,"lodash.isobject":101,"lodash.noop":82}],81:[function(t,e){e.exports=t(28)},{}],82:[function(t,e){e.exports=t(29)},{}],83:[function(t,e){e.exports=t(37)},{"lodash._basecreate":84,"lodash._setbinddata":74,"lodash._slice":88,"lodash.isobject":101}],84:[function(t,e){e.exports=t(33)},{"lodash._isnative":85,"lodash.isobject":101,"lodash.noop":86}],85:[function(t,e){e.exports=t(28)},{}],86:[function(t,e){e.exports=t(29)},{}],87:[function(t,e){e.exports=t(42)},{}],88:[function(t,e){e.exports=t(43)},{}],89:[function(t,e){e.exports=t(44)},{}],90:[function(t,e){e.exports=t(45)},{"lodash._isnative":91}],91:[function(t,e){e.exports=t(28)},{}],92:[function(t,e){function r(t,e,m,g,j,w){if(m){var _=m(t,e);if("undefined"!=typeof _)return!!_}if(t===e)return 0!==t||1/t==1/e;var P=typeof t,R=typeof e;if(!(t!==t||t&&a[P]||e&&a[R]))return!1;if(null==t||null==e)return t===e;var O=v.call(t),x=v.call(e);if(O==s&&(O=p),x==s&&(x=p),O!=x)return!1;switch(O){case l:case f:return+t==+e;case h:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case b:case d:return t==String(e)}var k=O==c;if(!k){var $=y.call(t,"__wrapped__"),S=y.call(e,"__wrapped__");if($||S)return r($?t.__wrapped__:t,S?e.__wrapped__:e,m,g,j,w);if(O!=p)return!1;var C=t.constructor,E=e.constructor;if(C!=E&&!(i(C)&&C instanceof C&&i(E)&&E instanceof E)&&"constructor"in t&&"constructor"in e)return!1}var N=!j;j||(j=o()),w||(w=o());for(var I=j.length;I--;)if(j[I]==t)return w[I]==e;var T=0;if(_=!0,j.push(t),w.push(e),k){if(I=t.length,T=e.length,_=T==I,_||g)for(;T--;){var M=I,G=e[T];if(g)for(;M--&&!(_=r(t[M],G,m,g,j,w)););else if(!(_=r(t[T],G,m,g,j,w)))break}}else n(e,function(e,n,o){return y.call(o,n)?(T++,_=y.call(t,n)&&r(t[n],e,m,g,j,w)):void 0}),_&&!g&&n(t,function(t,e,r){return y.call(r,e)?_=--T>-1:void 0});return j.pop(),w.pop(),N&&(u(j),u(w)),_}var n=t("lodash.forin"),o=t("lodash._getarray"),i=t("lodash.isfunction"),a=t("lodash._objecttypes"),u=t("lodash._releasearray"),s="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",h="[object Number]",p="[object Object]",b="[object RegExp]",d="[object String]",m=Object.prototype,v=m.toString,y=m.hasOwnProperty;e.exports=r},{"lodash._getarray":93,"lodash._objecttypes":95,"lodash._releasearray":96,"lodash.forin":99,"lodash.isfunction":100}],93:[function(t,e){e.exports=t(63)},{"lodash._arraypool":94}],94:[function(t,e){e.exports=t(64)},{}],95:[function(t,e){e.exports=t(47)},{}],96:[function(t,e){e.exports=t(66)},{"lodash._arraypool":97,"lodash._maxpoolsize":98}],97:[function(t,e){e.exports=t(64)},{}],98:[function(t,e){e.exports=t(68)},{}],99:[function(t,e){var r=t("lodash._basecreatecallback"),n=t("lodash._objecttypes"),o=function(t,e,o){var i,a=t,u=a;if(!a)return u;if(!n[typeof a])return u;e=e&&"undefined"==typeof o?e:r(e,o,3);for(i in a)if(e(a[i],i,t)===!1)return u;return u};e.exports=o},{"lodash._basecreatecallback":73,"lodash._objecttypes":95}],100:[function(t,e){e.exports=t(42)},{}],101:[function(t,e){e.exports=t(36)},{"lodash._objecttypes":102}],102:[function(t,e){e.exports=t(47)},{}],103:[function(t,e){e.exports=t(48)},{"lodash._isnative":104,"lodash._shimkeys":105,"lodash.isobject":101}],104:[function(t,e){e.exports=t(28)},{}],105:[function(t,e){e.exports=t(50)},{"lodash._objecttypes":106}],106:[function(t,e){e.exports=t(47)},{}],107:[function(t,e){function r(t){return function(e){return e[t]}}e.exports=r},{}],108:[function(t){(function(t,e){!function(t){"use strict";function e(t){return{configurable:!0,enumerable:!1,value:t,writable:!0}}function r(){return"__$"+Math.floor(1e9*Math.random())+"$"+ ++H+"$__"}function n(){var t=r();return Q[t]=!0,t}function o(t){return"object"==typeof t&&t instanceof u}function i(t){return o(t)?"symbol":typeof t}function a(t){var e=new u(t);if(!(this instanceof a))return e;throw new TypeError("Symbol cannot be new'ed")}function u(t){var e=r();E(this,D,{value:this}),E(this,L,{value:e}),E(this,W,{value:t}),c(this),z[e]=this}function s(t){var e=t[U];return e&&e.self===t?e:F(t)?(X.hash.value=Y++,X.self.value=t,V.value=S(null,X),E(t,U,V),V.value):void 0}function c(t){return s(t),N.apply(this,arguments)}function l(t){return s(t),A.apply(this,arguments)}function f(t){return s(t),q.apply(this,arguments)}function h(t){return o(t)?t[L]:t}function p(t){for(var e=[],r=T(t),n=0;n<r.length;n++){var o=r[n];z[o]||Q[o]||e.push(o)}return e}function b(t,e){return I(t,h(e))}function d(t){for(var e=[],r=T(t),n=0;n<r.length;n++){var o=z[r[n]];o&&e.push(o)}return e}function m(t){return G.call(this,h(t))}function v(e){return t.traceur&&t.traceur.options[e]}function y(t,e,r){var n,i;return o(e)&&(n=e,e=e[L]),t[e]=r,n&&(i=I(t,e))&&E(t,e,{enumerable:!1}),r}function g(t,e,r){return o(e)&&(r.enumerable&&(r=S(r,{enumerable:{value:!1}})),e=e[L]),E(t,e,r),t}function j(t){E(t,"defineProperty",{value:g}),E(t,"getOwnPropertyNames",{value:p}),E(t,"getOwnPropertyDescriptor",{value:b}),E(t.prototype,"hasOwnProperty",{value:m}),E(t,"freeze",{value:c}),E(t,"preventExtensions",{value:l}),E(t,"seal",{value:f}),t.getOwnPropertySymbols=d}function w(t){for(var e=1;e<arguments.length;e++)for(var r=T(arguments[e]),n=0;n<r.length;n++){var o=r[n];Q[o]||!function(e,r){E(t,r,{get:function(){return e[r]},enumerable:!0})}(arguments[e],r[n])}return t}function _(t){return null!=t&&("object"==typeof t||"function"==typeof t)}function P(t){if(null==t)throw $();return k(t)}function R(t){if(!_(t))throw $(t+" is not an Object");return t}function O(t){if(null==t)throw new TypeError("Value cannot be converted to an Object");return t}function x(t){t.Symbol=a,t.Reflect=t.Reflect||{},t.Reflect.global=t.Reflect.global||t,j(t.Object)}if(!t.$traceurRuntime){var k=Object,$=TypeError,S=k.create,C=k.defineProperties,E=k.defineProperty,N=k.freeze,I=k.getOwnPropertyDescriptor,T=k.getOwnPropertyNames,M=k.keys,G=k.prototype.hasOwnProperty,A=(k.prototype.toString,Object.preventExtensions),q=Object.seal,F=Object.isExtensible,K={"void":function(){},any:function(){},string:function(){},number:function(){},"boolean":function(){}},B=e,H=0,L=r(),W=r(),D=r(),z=S(null),Q=S(null);E(a.prototype,"constructor",e(a)),E(a.prototype,"toString",B(function(){var t=this[D];if(!v("symbols"))return t[L];if(!t)throw TypeError("Conversion from symbol to string");var e=t[W];return void 0===e&&(e=""),"Symbol("+e+")"})),E(a.prototype,"valueOf",B(function(){var t=this[D];if(!t)throw TypeError("Conversion from symbol to string");return v("symbols")?t:t[L]})),E(u.prototype,"constructor",e(a)),E(u.prototype,"toString",{value:a.prototype.toString,enumerable:!1}),E(u.prototype,"valueOf",{value:a.prototype.valueOf,enumerable:!1});var U=n(),V={value:void 0},X={hash:{value:void 0},self:{value:void 0}},Y=0;a.iterator=a(),c(u.prototype),x(t),t.$traceurRuntime={assertObject:R,createPrivateName:n,exportStar:w,getOwnHashObject:s,privateNames:Q,setProperty:y,setupGlobals:x,toObject:P,isObject:_,toProperty:h,type:K,"typeof":i,checkObjectCoercible:O,hasOwnProperty:function(t,e){return m.call(t,e)},defineProperties:C,defineProperty:E,getOwnPropertyDescriptor:I,getOwnPropertyNames:T,keys:M}}}("undefined"!=typeof e?e:this),function(){"use strict";function t(){for(var t,e=[],r=0,n=0;n<arguments.length;n++){var o=$traceurRuntime.checkObjectCoercible(arguments[n]);if("function"!=typeof o[$traceurRuntime.toProperty(Symbol.iterator)])throw new TypeError("Cannot spread non-iterable object.");for(var i=o[$traceurRuntime.toProperty(Symbol.iterator)]();!(t=i.next()).done;)e[r++]=t.value}return e}$traceurRuntime.spread=t}(),function(){"use strict";function t(t,e){var r=d(t);do{var n=p(r,e);if(n)return n;r=d(r)}while(r);return void 0}function e(t,e,n,o){return r(t,e,n).apply(t,o)}function r(e,r,n){var o=t(r,n);return o?o.get?o.get.call(e):o.value:void 0}function n(e,r,n,o){var i=t(r,n);if(i&&i.set)return i.set.call(e,o),o;throw c("super has no setter '"+n+"'.")}function o(t){for(var e,r={},n=b(t),o=0;o<n.length;o++){var e=n[o];r[e]=p(t,e)}return r}function i(t,e,r,n){return h(e,"constructor",{value:t,configurable:!0,enumerable:!1,writable:!0}),arguments.length>3?("function"==typeof n&&(t.__proto__=n),t.prototype=l(a(n),o(e))):t.prototype=e,h(t,"prototype",{configurable:!1,writable:!1}),f(t,o(r))}function a(t){if("function"==typeof t){var e=t.prototype;if(s(e)===e||null===e)return t.prototype;throw new c("super prototype must be an Object or null")}if(null===t)return null;throw new c("Super expression must either be null or a function")}function u(t,r,n){null!==d(r)&&e(t,r,"constructor",n)}var s=Object,c=TypeError,l=s.create,f=$traceurRuntime.defineProperties,h=$traceurRuntime.defineProperty,p=$traceurRuntime.getOwnPropertyDescriptor,b=$traceurRuntime.getOwnPropertyNames,d=Object.getPrototypeOf;$traceurRuntime.createClass=i,$traceurRuntime.defaultSuperCall=u,$traceurRuntime.superCall=e,$traceurRuntime.superGet=r,$traceurRuntime.superSet=n}(),function(){"use strict";function t(t){return{configurable:!0,enumerable:!1,value:t,writable:!0}}function e(t){return new Error("Traceur compiler bug: invalid state in state machine: "+t)}function r(){this.state=0,this.GState=v,this.storedException=void 0,this.finallyFallThrough=void 0,this.sent_=void 0,this.returnValue=void 0,this.tryStack_=[]}function n(t,e,r,n){switch(t.GState){case y:throw new Error('"'+r+'" on executing generator');case j:if("next"==r)return{value:void 0,done:!0};throw n;case v:if("throw"===r)throw t.GState=j,n;if(void 0!==n)throw m("Sent value to newborn generator");case g:t.GState=y,t.action=r,t.sent=n;var o=e(t),i=o===t;return i&&(o=t.returnValue),t.GState=i?j:g,{value:o,done:i}}}function o(){}function i(){}function a(t,e,n){var o=l(t,n),i=new r,a=d(e.prototype);return a[P]=i,a[R]=o,a}function u(t){return t.prototype=d(i.prototype),t.__proto__=i,t}function s(){r.call(this),this.err=void 0;var t=this;t.result=new Promise(function(e,r){t.resolve=e,t.reject=r})}function c(t,e){var r=l(t,e),n=new s;return n.createCallback=function(t){return function(e){n.state=t,n.value=e,r(n)}},n.errback=function(t){f(n,t),r(n)},r(n),n.result}function l(t,e){return function(r){for(;;)try{return t.call(e,r)}catch(n){f(r,n)}}}function f(t,e){t.storedException=e;var r=t.tryStack_[t.tryStack_.length-1];return r?(t.state=void 0!==r.catch?r.catch:r.finally,void(void 0!==r.finallyFallThrough&&(t.finallyFallThrough=r.finallyFallThrough))):void t.handleException(e)
}var h=$traceurRuntime.createPrivateName,p=$traceurRuntime.defineProperties,b=$traceurRuntime.defineProperty,d=Object.create,m=TypeError,v=0,y=1,g=2,j=3,w=-2,_=-3;r.prototype={pushTry:function(t,e){if(null!==e){for(var r=null,n=this.tryStack_.length-1;n>=0;n--)if(void 0!==this.tryStack_[n].catch){r=this.tryStack_[n].catch;break}null===r&&(r=_),this.tryStack_.push({"finally":e,finallyFallThrough:r})}null!==t&&this.tryStack_.push({"catch":t})},popTry:function(){this.tryStack_.pop()},get sent(){return this.maybeThrow(),this.sent_},set sent(t){this.sent_=t},get sentIgnoreThrow(){return this.sent_},maybeThrow:function(){if("throw"===this.action)throw this.action="next",this.sent_},end:function(){switch(this.state){case w:return this;case _:throw this.storedException;default:throw e(this.state)}},handleException:function(t){throw this.GState=j,this.state=w,t}};var P=h(),R=h();o.prototype=i,b(i,"constructor",t(o)),i.prototype={constructor:i,next:function(t){return n(this[P],this[R],"next",t)},"throw":function(t){return n(this[P],this[R],"throw",t)}},p(i.prototype,{constructor:{enumerable:!1},next:{enumerable:!1},"throw":{enumerable:!1}}),Object.defineProperty(i.prototype,Symbol.iterator,t(function(){return this})),s.prototype=d(r.prototype),s.prototype.end=function(){switch(this.state){case w:this.resolve(this.returnValue);break;case _:this.reject(this.storedException);break;default:this.reject(e(this.state))}},s.prototype.handleException=function(){this.state=_},$traceurRuntime.asyncWrap=c,$traceurRuntime.initGeneratorFunction=u,$traceurRuntime.createGeneratorInstance=a}(),function(){function t(t,e,r,n,o,i,a){var u=[];return t&&u.push(t,":"),r&&(u.push("//"),e&&u.push(e,"@"),u.push(r),n&&u.push(":",n)),o&&u.push(o),i&&u.push("?",i),a&&u.push("#",a),u.join("")}function e(t){return t.match(u)}function r(t){if("/"===t)return"/";for(var e="/"===t[0]?"/":"",r="/"===t.slice(-1)?"/":"",n=t.split("/"),o=[],i=0,a=0;a<n.length;a++){var u=n[a];switch(u){case"":case".":break;case"..":o.length?o.pop():i++;break;default:o.push(u)}}if(!e){for(;i-->0;)o.unshift("..");0===o.length&&o.push(".")}return e+o.join("/")+r}function n(e){var n=e[s.PATH]||"";return n=r(n),e[s.PATH]=n,t(e[s.SCHEME],e[s.USER_INFO],e[s.DOMAIN],e[s.PORT],e[s.PATH],e[s.QUERY_DATA],e[s.FRAGMENT])}function o(t){var r=e(t);return n(r)}function i(t,r){var o=e(r),i=e(t);if(o[s.SCHEME])return n(o);o[s.SCHEME]=i[s.SCHEME];for(var a=s.SCHEME;a<=s.PORT;a++)o[a]||(o[a]=i[a]);if("/"==o[s.PATH][0])return n(o);var u=i[s.PATH],c=u.lastIndexOf("/");return u=u.slice(0,c+1)+o[s.PATH],o[s.PATH]=u,n(o)}function a(t){if(!t)return!1;if("/"===t[0])return!0;var r=e(t);return r[s.SCHEME]?!0:!1}var u=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),s={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};$traceurRuntime.canonicalizeUrl=o,$traceurRuntime.isAbsolute=a,$traceurRuntime.removeDotSegments=r,$traceurRuntime.resolveUrl=i}(),function(t){"use strict";function e(t){if(t){var e=d.normalize(t);return s[e]}}function r(t){var e=arguments[1],r=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(n){var o,i;if(e===b){var a=Object.getOwnPropertyDescriptor(t,n);a.get&&(o=a.get)}o||(i=t[n],o=function(){return i}),Object.defineProperty(r,n,{get:o,enumerable:!0})}),Object.preventExtensions(r),r}var n,o=$traceurRuntime.assertObject($traceurRuntime),i=o.canonicalizeUrl,a=o.resolveUrl,u=o.isAbsolute,s=Object.create(null);n=t.location&&t.location.href?a(t.location.href,"./"):"";var c=function(t,e){this.url=t,this.value_=e};$traceurRuntime.createClass(c,{},{});var l=function(t,e){this.message=this.constructor.name+(e?": '"+e+"'":"")+" in "+t};$traceurRuntime.createClass(l,{loadedBy:function(t){this.message+="\n loaded by "+t}},{},Error);var f=function(t,e){$traceurRuntime.superCall(this,h.prototype,"constructor",[t,null]),this.func=e},h=f;$traceurRuntime.createClass(f,{getUncoatedModule:function(){if(this.value_)return this.value_;try{return this.value_=this.func.call(t)}catch(e){if(e instanceof l)throw e.loadedBy(this.url),e;throw new l(this.url,e)}}},{},c);var p=Object.create(null),b={},d={normalize:function(t,e){if("string"!=typeof t)throw new TypeError("module name must be a string, not "+typeof t);if(u(t))return i(t);if(/[^\.]\/\.\.\//.test(t))throw new Error("module name embeds /../: "+t);return"."===t[0]&&e?a(e,t):i(t)},get:function(t){var n=e(t);if(!n)return void 0;var o=p[n.url];return o?o:(o=r(n.getUncoatedModule(),b),p[n.url]=o)},set:function(t,e){t=String(t),s[t]=new f(t,function(){return e}),p[t]=e},get baseURL(){return n},set baseURL(t){n=String(t)},registerModule:function(t,e){var r=d.normalize(t);if(s[r])throw new Error("duplicate module named "+r);s[r]=new f(r,e)},bundleStore:Object.create(null),register:function(t,e,r){e&&(e.length||r.length)?this.bundleStore[t]={deps:e,execute:function(){var t=arguments,n={};e.forEach(function(e,r){return n[e]=t[r]});var o=r.call(this,n);return o.execute.call(this),o.exports}}:this.registerModule(t,r)},getAnonymousModule:function(e){return new r(e.call(t),b)},getForTesting:function(t){var e=this;return this.testingPrefix_||Object.keys(p).some(function(t){var r=/(traceur@[^\/]*\/)/.exec(t);return r?(e.testingPrefix_=r[1],!0):void 0}),this.get(this.testingPrefix_+t)}};d.set("@traceur/src/runtime/ModuleStore",new r({ModuleStore:d}));var m=$traceurRuntime.setupGlobals;$traceurRuntime.setupGlobals=function(t){m(t)},$traceurRuntime.ModuleStore=d,t.System={register:d.register.bind(d),get:d.get,set:d.set,normalize:d.normalize},$traceurRuntime.getModuleImpl=function(t){var r=e(t);return r&&r.getUncoatedModule()}}("undefined"!=typeof e?e:this),System.register("traceur-runtime@0.0.55/src/runtime/polyfills/utils",[],function(){"use strict";function t(t){return t>>>0}function e(t){return t&&("object"==typeof t||"function"==typeof t)}function r(t){return"function"==typeof t}function n(t){return"number"==typeof t}function o(t){return t=+t,h(t)?0:0!==t&&f(t)?t>0?l(t):c(t):t}function i(t){var e=o(t);return 0>e?0:b(e,m)}function a(t){return e(t)?t[Symbol.iterator]:void 0}function u(t){return r(t)}function s(t,e){return{value:t,done:e}}var c=Math.ceil,l=Math.floor,f=isFinite,h=isNaN,p=Math.pow,b=Math.min,d=$traceurRuntime.toObject,m=p(2,53)-1;return{get toObject(){return d},get toUint32(){return t},get isObject(){return e},get isCallable(){return r},get isNumber(){return n},get toInteger(){return o},get toLength(){return i},get checkIterable(){return a},get isConstructor(){return u},get createIteratorResultObject(){return s}}}),System.register("traceur-runtime@0.0.55/src/runtime/polyfills/Array",[],function(){"use strict";function t(t){var e,r,n=arguments[1],o=arguments[2],i=this,c=f(t),h=void 0!==n,p=0;if(h&&!a(n))throw TypeError();if(s(c)){e=u(i)?new i:[];for(var b,d=c[Symbol.iterator]();!(b=d.next()).done;){var m=b.value;e[p]=h?n.call(o,m,p):m,p++}return e.length=p,e}for(r=l(c.length),e=u(i)?new i(r):new Array(r);r>p;p++)e[p]=h?"undefined"==typeof o?n(c[p],p):n.call(o,c[p],p):c[p];return e.length=r,e}function e(t){var e=void 0!==arguments[1]?arguments[1]:0,r=arguments[2],n=f(this),o=l(n.length),i=c(e),a=void 0!==r?c(r):o;for(i=0>i?Math.max(o+i,0):Math.min(i,o),a=0>a?Math.max(o+a,0):Math.min(a,o);a>i;)n[i]=t,i++;return n}function r(t){var e=arguments[1];return o(this,t,e)}function n(t){var e=arguments[1];return o(this,t,e,!0)}function o(t,e){var r=arguments[2],n=void 0!==arguments[3]?arguments[3]:!1,o=f(t),i=l(o.length);if(!a(e))throw TypeError();for(var u=0;i>u;u++)if(u in o){var s=o[u];if(e.call(r,s,u,o))return n?u:s}return n?-1:void 0}var i=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/utils"),a=i.isCallable,u=i.isConstructor,s=i.checkIterable,c=i.toInteger,l=i.toLength,f=i.toObject;return{get from(){return t},get fill(){return e},get find(){return r},get findIndex(){return n}}}),System.register("traceur-runtime@0.0.55/src/runtime/polyfills/ArrayIterator",[],function(){"use strict";function t(t,e){var r=a(t),n=new h;return n.iteratorObject_=r,n.arrayIteratorNextIndex_=0,n.arrayIterationKind_=e,n}function e(){return t(this,f)}function r(){return t(this,c)}function n(){return t(this,l)}var o,i=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/utils"),a=i.toObject,u=i.toUint32,s=i.createIteratorResultObject,c=1,l=2,f=3,h=function(){};return $traceurRuntime.createClass(h,(o={},Object.defineProperty(o,"next",{value:function(){var t=a(this),e=t.iteratorObject_;if(!e)throw new TypeError("Object is not an ArrayIterator");var r=t.arrayIteratorNextIndex_,n=t.arrayIterationKind_,o=u(e.length);return r>=o?(t.arrayIteratorNextIndex_=1/0,s(void 0,!0)):(t.arrayIteratorNextIndex_=r+1,n==l?s(e[r],!1):n==f?s([r,e[r]],!1):s(r,!1))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(o,Symbol.iterator,{value:function(){return this},configurable:!0,enumerable:!0,writable:!0}),o),{}),{get entries(){return e},get keys(){return r},get values(){return n}}}),System.register("traceur-runtime@0.0.55/src/runtime/polyfills/Map",[],function(){"use strict";function t(t,e){if(r(e)){var o=n(e);return o&&t.objectIndex_[o.hash]}return"string"==typeof e?t.stringIndex_[e]:t.primitiveIndex_[e]}function e(t){t.entries_=[],t.objectIndex_=Object.create(null),t.stringIndex_=Object.create(null),t.primitiveIndex_=Object.create(null),t.deletedCount_=0}var r=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/utils").isObject,n=$traceurRuntime.getOwnHashObject,o=Object.prototype.hasOwnProperty,i={},a=function(){var t=arguments[0];if(!r(this))throw new TypeError("Map called on incompatible type");if(o.call(this,"entries_"))throw new TypeError("Map can not be reentrantly initialised");if(e(this),null!==t&&void 0!==t)for(var n,i=t[Symbol.iterator]();!(n=i.next()).done;){var a=$traceurRuntime.assertObject(n.value),u=a[0],s=a[1];this.set(u,s)}};return $traceurRuntime.createClass(a,{get size(){return this.entries_.length/2-this.deletedCount_},get:function(e){var r=t(this,e);return void 0!==r?this.entries_[r+1]:void 0},set:function(e,o){var i=r(e),a="string"==typeof e,u=t(this,e);if(void 0!==u)this.entries_[u+1]=o;else if(u=this.entries_.length,this.entries_[u]=e,this.entries_[u+1]=o,i){var s=n(e),c=s.hash;this.objectIndex_[c]=u}else a?this.stringIndex_[e]=u:this.primitiveIndex_[e]=u;return this},has:function(e){return void 0!==t(this,e)},"delete":function(t){var e,o,a=r(t),u="string"==typeof t;if(a){var s=n(t);s&&(e=this.objectIndex_[o=s.hash],delete this.objectIndex_[o])}else u?(e=this.stringIndex_[t],delete this.stringIndex_[t]):(e=this.primitiveIndex_[t],delete this.primitiveIndex_[t]);void 0!==e&&(this.entries_[e]=i,this.entries_[e+1]=void 0,this.deletedCount_++)},clear:function(){e(this)},forEach:function(t){for(var e=arguments[1],r=0,n=this.entries_.length;n>r;r+=2){var o=this.entries_[r],a=this.entries_[r+1];o!==i&&t.call(e,a,o,this)}},entries:$traceurRuntime.initGeneratorFunction(function u(){var t,e,r,n;return $traceurRuntime.createGeneratorInstance(function(o){for(;;)switch(o.state){case 0:t=0,e=this.entries_.length,o.state=12;break;case 12:o.state=e>t?8:-2;break;case 4:t+=2,o.state=12;break;case 8:r=this.entries_[t],n=this.entries_[t+1],o.state=9;break;case 9:o.state=r===i?4:6;break;case 6:return o.state=2,[r,n];case 2:o.maybeThrow(),o.state=4;break;default:return o.end()}},u,this)}),keys:$traceurRuntime.initGeneratorFunction(function s(){var t,e,r,n;return $traceurRuntime.createGeneratorInstance(function(o){for(;;)switch(o.state){case 0:t=0,e=this.entries_.length,o.state=12;break;case 12:o.state=e>t?8:-2;break;case 4:t+=2,o.state=12;break;case 8:r=this.entries_[t],n=this.entries_[t+1],o.state=9;break;case 9:o.state=r===i?4:6;break;case 6:return o.state=2,r;case 2:o.maybeThrow(),o.state=4;break;default:return o.end()}},s,this)}),values:$traceurRuntime.initGeneratorFunction(function c(){var t,e,r,n;return $traceurRuntime.createGeneratorInstance(function(o){for(;;)switch(o.state){case 0:t=0,e=this.entries_.length,o.state=12;break;case 12:o.state=e>t?8:-2;break;case 4:t+=2,o.state=12;break;case 8:r=this.entries_[t],n=this.entries_[t+1],o.state=9;break;case 9:o.state=r===i?4:6;break;case 6:return o.state=2,n;case 2:o.maybeThrow(),o.state=4;break;default:return o.end()}},c,this)})},{}),Object.defineProperty(a.prototype,Symbol.iterator,{configurable:!0,writable:!0,value:a.prototype.entries}),{get Map(){return a}}}),System.register("traceur-runtime@0.0.55/src/runtime/polyfills/Number",[],function(){"use strict";function t(t){return i(t)&&s(t)}function e(e){return t(e)&&a(e)===e}function r(t){return i(t)&&c(t)}function n(e){if(t(e)){var r=a(e);if(r===e)return u(r)<=l}return!1}var o=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/utils"),i=o.isNumber,a=o.toInteger,u=Math.abs,s=isFinite,c=isNaN,l=Math.pow(2,53)-1,f=-Math.pow(2,53)+1,h=Math.pow(2,-52);return{get MAX_SAFE_INTEGER(){return l},get MIN_SAFE_INTEGER(){return f},get EPSILON(){return h},get isFinite(){return t},get isInteger(){return e},get isNaN(){return r},get isSafeInteger(){return n}}}),System.register("traceur-runtime@0.0.55/src/runtime/polyfills/Object",[],function(){"use strict";function t(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function e(t){for(var e=1;e<arguments.length;e++){var r,n=arguments[e],o=u(n),i=o.length;for(r=0;i>r;r++){var a=o[r];s[a]||(t[a]=n[a])}}return t}function r(t,e){var r,n,u=a(e),c=u.length;for(r=0;c>r;r++){var l=u[r];s[l]||(n=i(e,u[r]),o(t,u[r],n))}return t}var n=$traceurRuntime.assertObject($traceurRuntime),o=n.defineProperty,i=n.getOwnPropertyDescriptor,a=n.getOwnPropertyNames,u=n.keys,s=n.privateNames;return{get is(){return t},get assign(){return e},get mixin(){return r}}}),System.register("traceur-runtime@0.0.55/node_modules/rsvp/lib/rsvp/asap",[],function(){"use strict";function e(t,e){p[s]=t,p[s+1]=e,s+=2,2===s&&u()}function r(){return function(){t.nextTick(a)}}function n(){var t=0,e=new f(a),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function o(){var t=new MessageChannel;return t.port1.onmessage=a,function(){t.port2.postMessage(0)}}function i(){return function(){setTimeout(a,1)}}function a(){for(var t=0;s>t;t+=2){var e=p[t],r=p[t+1];e(r),p[t]=void 0,p[t+1]=void 0}s=0}var u,s=0,c=e,l="undefined"!=typeof window?window:{},f=l.MutationObserver||l.WebKitMutationObserver,h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,p=new Array(1e3);return u="undefined"!=typeof t&&"[object process]"==={}.toString.call(t)?r():f?n():h?o():i(),{get default(){return c}}}),System.register("traceur-runtime@0.0.55/src/runtime/polyfills/Promise",[],function(){"use strict";function t(t){return t&&"object"==typeof t&&void 0!==t.status_}function e(t){return t}function r(t){throw t}function n(t){var n=void 0!==arguments[1]?arguments[1]:e,i=void 0!==arguments[2]?arguments[2]:r,a=o(t.constructor);switch(t.status_){case void 0:throw TypeError;case 0:t.onResolve_.push(n,a),t.onReject_.push(i,a);break;case 1:l(t.value_,[n,a]);break;case-1:l(t.value_,[i,a])}return a.promise}function o(t){if(this===v){var e=a(new v(d));return{promise:e,resolve:function(t){u(e,t)},reject:function(t){s(e,t)}}}var r={};return r.promise=new t(function(t,e){r.resolve=t,r.reject=e}),r}function i(t,e,r,n,o){return t.status_=e,t.value_=r,t.onResolve_=n,t.onReject_=o,t}function a(t){return i(t,0,void 0,[],[])}function u(t,e){c(t,1,e,t.onResolve_)}function s(t,e){c(t,-1,e,t.onReject_)}function c(t,e,r,n){0===t.status_&&(l(r,n),i(t,e,r))}function l(t,e){b(function(){for(var r=0;r<e.length;r+=2)f(t,e[r],e[r+1])})}function f(e,r,o){try{var i=r(e);if(i===o.promise)throw new TypeError;t(i)?n(i,o.resolve,o.reject):o.resolve(i)}catch(a){try{o.reject(a)}catch(a){}}}function h(t){return t&&("object"==typeof t||"function"==typeof t)}function p(e,r){if(!t(r)&&h(r)){var n;try{n=r.then}catch(i){var a=y.call(e,i);return r[g]=a,a}if("function"==typeof n){var u=r[g];if(u)return u;var s=o(e);r[g]=s.promise;try{n.call(r,s.resolve,s.reject)}catch(i){s.reject(i)}return s.promise}}return r}var b=System.get("traceur-runtime@0.0.55/node_modules/rsvp/lib/rsvp/asap").default,d={},m=function(t){if(t!==d){if("function"!=typeof t)throw new TypeError;var e=a(this);try{t(function(t){u(e,t)},function(t){s(e,t)})}catch(r){s(e,r)}}};$traceurRuntime.createClass(m,{"catch":function(t){return this.then(void 0,t)},then:function(o,i){"function"!=typeof o&&(o=e),"function"!=typeof i&&(i=r);var a=this,u=this.constructor;return n(this,function(e){return e=p(u,e),e===a?i(new TypeError):t(e)?e.then(o,i):o(e)},i)}},{resolve:function(t){return this===v?i(new v(d),1,t):new this(function(e){e(t)})},reject:function(t){return this===v?i(new v(d),-1,t):new this(function(e,r){r(t)})},cast:function(e){if(e instanceof this)return e;if(t(e)){var r=o(this);return n(e,r.resolve,r.reject),r.promise}return this.resolve(e)},all:function(t){var e=o(this),r=[];try{var n=t.length;if(0===n)e.resolve(r);else for(var i=0;i<t.length;i++)this.resolve(t[i]).then(function(t,o){r[t]=o,0===--n&&e.resolve(r)}.bind(void 0,i),function(t){e.reject(t)})}catch(a){e.reject(a)}return e.promise},race:function(t){var e=o(this);try{for(var r=0;r<t.length;r++)this.resolve(t[r]).then(function(t){e.resolve(t)},function(t){e.reject(t)})}catch(n){e.reject(n)}return e.promise}});var v=m,y=v.reject,g="@@thenable";return{get Promise(){return m}}}),System.register("traceur-runtime@0.0.55/src/runtime/polyfills/Set",[],function(){"use strict";function t(t){t.map_=new r}var e=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/utils").isObject,r=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/Map").Map,n=($traceurRuntime.getOwnHashObject,Object.prototype.hasOwnProperty),o=function(){var r=arguments[0];if(!e(this))throw new TypeError("Set called on incompatible type");if(n.call(this,"map_"))throw new TypeError("Set can not be reentrantly initialised");if(t(this),null!==r&&void 0!==r)for(var o,i=r[Symbol.iterator]();!(o=i.next()).done;){var a=o.value;this.add(a)}};return $traceurRuntime.createClass(o,{get size(){return this.map_.size},has:function(t){return this.map_.has(t)},add:function(t){return this.map_.set(t,t)},"delete":function(t){return this.map_.delete(t)},clear:function(){return this.map_.clear()},forEach:function(t){var e=arguments[1],r=this;return this.map_.forEach(function(n,o){t.call(e,o,o,r)})},values:$traceurRuntime.initGeneratorFunction(function i(){var t,e;return $traceurRuntime.createGeneratorInstance(function(r){for(;;)switch(r.state){case 0:t=this.map_.keys()[Symbol.iterator](),r.sent=void 0,r.action="next",r.state=12;break;case 12:e=t[r.action](r.sentIgnoreThrow),r.state=9;break;case 9:r.state=e.done?3:2;break;case 3:r.sent=e.value,r.state=-2;break;case 2:return r.state=12,e.value;default:return r.end()}},i,this)}),entries:$traceurRuntime.initGeneratorFunction(function a(){var t,e;return $traceurRuntime.createGeneratorInstance(function(r){for(;;)switch(r.state){case 0:t=this.map_.entries()[Symbol.iterator](),r.sent=void 0,r.action="next",r.state=12;break;case 12:e=t[r.action](r.sentIgnoreThrow),r.state=9;break;case 9:r.state=e.done?3:2;break;case 3:r.sent=e.value,r.state=-2;break;case 2:return r.state=12,e.value;default:return r.end()}},a,this)})},{}),Object.defineProperty(o.prototype,Symbol.iterator,{configurable:!0,writable:!0,value:o.prototype.values}),Object.defineProperty(o.prototype,"keys",{configurable:!0,writable:!0,value:o.prototype.values}),{get Set(){return o}}}),System.register("traceur-runtime@0.0.55/src/runtime/polyfills/StringIterator",[],function(){"use strict";function t(t){var e=String(t),r=Object.create(l.prototype);return r[u(s)]=e,r[u(c)]=0,r}var e,r=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/utils"),n=r.createIteratorResultObject,o=r.isObject,i=$traceurRuntime.assertObject($traceurRuntime),a=i.hasOwnProperty,u=i.toProperty,s=Symbol("iteratedString"),c=Symbol("stringIteratorNextIndex"),l=function(){};return $traceurRuntime.createClass(l,(e={},Object.defineProperty(e,"next",{value:function(){var t=this;if(!o(t)||!a(t,s))throw new TypeError("this must be a StringIterator object");var e=t[u(s)];if(void 0===e)return n(void 0,!0);var r=t[u(c)],i=e.length;if(r>=i)return t[u(s)]=void 0,n(void 0,!0);var l,f=e.charCodeAt(r);if(55296>f||f>56319||r+1===i)l=String.fromCharCode(f);else{var h=e.charCodeAt(r+1);l=56320>h||h>57343?String.fromCharCode(f):String.fromCharCode(f)+String.fromCharCode(h)}return t[u(c)]=r+l.length,n(l,!1)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(e,Symbol.iterator,{value:function(){return this},configurable:!0,enumerable:!0,writable:!0}),e),{}),{get createStringIterator(){return t}}}),System.register("traceur-runtime@0.0.55/src/runtime/polyfills/String",[],function(){"use strict";function t(t){var e=String(this);if(null==this||"[object RegExp]"==c.call(t))throw TypeError();var r=e.length,n=String(t),o=(n.length,arguments.length>1?arguments[1]:void 0),i=o?Number(o):0;isNaN(i)&&(i=0);var a=Math.min(Math.max(i,0),r);return l.call(e,n,i)==a}function e(t){var e=String(this);if(null==this||"[object RegExp]"==c.call(t))throw TypeError();var r=e.length,n=String(t),o=n.length,i=r;if(arguments.length>1){var a=arguments[1];void 0!==a&&(i=a?Number(a):0,isNaN(i)&&(i=0))}var u=Math.min(Math.max(i,0),r),s=u-o;return 0>s?!1:f.call(e,n,s)==s}function r(t){if(null==this)throw TypeError();var e=String(this),r=e.length,n=String(t),o=(n.length,arguments.length>1?arguments[1]:void 0),i=o?Number(o):0;isNaN(i)&&(i=0);Math.min(Math.max(i,0),r);return-1!=l.call(e,n,i)}function n(t){if(null==this)throw TypeError();var e=String(this),r=t?Number(t):0;if(isNaN(r)&&(r=0),0>r||1/0==r)throw RangeError();if(0==r)return"";for(var n="";r--;)n+=e;return n}function o(t){if(null==this)throw TypeError();var e=String(this),r=e.length,n=t?Number(t):0;if(isNaN(n)&&(n=0),0>n||n>=r)return void 0;var o,i=e.charCodeAt(n);return i>=55296&&56319>=i&&r>n+1&&(o=e.charCodeAt(n+1),o>=56320&&57343>=o)?1024*(i-55296)+o-56320+65536:i}function i(t){var e=t.raw,r=e.length>>>0;if(0===r)return"";for(var n="",o=0;;){if(n+=e[o],o+1===r)return n;n+=arguments[++o]}}function a(){var t,e,r=[],n=Math.floor,o=-1,i=arguments.length;if(!i)return"";for(;++o<i;){var a=Number(arguments[o]);if(!isFinite(a)||0>a||a>1114111||n(a)!=a)throw RangeError("Invalid code point: "+a);65535>=a?r.push(a):(a-=65536,t=(a>>10)+55296,e=a%1024+56320,r.push(t,e))}return String.fromCharCode.apply(null,r)}function u(){var t=$traceurRuntime.checkObjectCoercible(this),e=String(t);return s(e)}var s=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/StringIterator").createStringIterator,c=Object.prototype.toString,l=String.prototype.indexOf,f=String.prototype.lastIndexOf;return{get startsWith(){return t},get endsWith(){return e},get contains(){return r},get repeat(){return n},get codePointAt(){return o},get raw(){return i},get fromCodePoint(){return a},get stringPrototypeIterator(){return u}}}),System.register("traceur-runtime@0.0.55/src/runtime/polyfills/polyfills",[],function(){"use strict";function t(t,e,r){e in t||Object.defineProperty(t,e,r)}function e(e,r,n){t(e,r,{value:n,configurable:!0,enumerable:!1,writable:!0})}function r(e,r,n){t(e,r,{value:n,configurable:!1,enumerable:!1,writable:!1})}function n(t,r){for(var n=0;n<r.length;n+=2){var o=r[n],i=r[n+1];e(t,o,i)}}function o(t,e){for(var n=0;n<e.length;n+=2){var o=e[n],i=e[n+1];r(t,o,i)}}function i(t,e,r){r&&r.iterator&&!t[r.iterator]&&(t["@@iterator"]&&(e=t["@@iterator"]),Object.defineProperty(t,r.iterator,{value:e,configurable:!0,enumerable:!1,writable:!0}))}function a(t){t.Promise||(t.Promise=d)}function u(t,e){t.Map||(t.Map=p);var r=t.Map.prototype;r.entries&&(i(r,r.entries,e),i(z((new t.Map).entries()),function(){return this},e)),t.Set||(t.Set=b);var n=t.Set.prototype;n.values&&(i(n,n.values,e),i(z((new t.Set).values()),function(){return this},e))}function s(t){n(t.prototype,["codePointAt",v,"contains",y,"endsWith",g,"startsWith",P,"repeat",w]),n(t,["fromCodePoint",j,"raw",_]),i(t.prototype,R,Symbol)}function c(t,e){n(t.prototype,["entries",E,"keys",N,"values",I,"fill",x,"find",k,"findIndex",$]),n(t,["from",S]),i(t.prototype,I,e),i(z([].values()),function(){return this},e)}function l(t){n(t,["assign",M,"is",G,"mixin",A])}function f(t){o(t,["MAX_SAFE_INTEGER",F,"MIN_SAFE_INTEGER",K,"EPSILON",B]),n(t,["isFinite",H,"isInteger",L,"isNaN",W,"isSafeInteger",D])}function h(t){a(t),u(t,t.Symbol),s(t.String),c(t.Array,t.Symbol),l(t.Object),f(t.Number)}var p=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/Map").Map,b=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/Set").Set,d=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/Promise").Promise,m=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/String"),v=m.codePointAt,y=m.contains,g=m.endsWith,j=m.fromCodePoint,w=m.repeat,_=m.raw,P=m.startsWith,R=m.stringPrototypeIterator,O=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/Array"),x=O.fill,k=O.find,$=O.findIndex,S=O.from,C=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/ArrayIterator"),E=C.entries,N=C.keys,I=C.values,T=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/Object"),M=T.assign,G=T.is,A=T.mixin,q=System.get("traceur-runtime@0.0.55/src/runtime/polyfills/Number"),F=q.MAX_SAFE_INTEGER,K=q.MIN_SAFE_INTEGER,B=q.EPSILON,H=q.isFinite,L=q.isInteger,W=q.isNaN,D=q.isSafeInteger,z=$traceurRuntime.assertObject(Object).getPrototypeOf;h(this);var Q=$traceurRuntime.setupGlobals;return $traceurRuntime.setupGlobals=function(t){Q(t),h(t)},{}}),System.register("traceur-runtime@0.0.55/src/runtime/polyfill-import",[],function(){"use strict";return System.get("traceur-runtime@0.0.55/src/runtime/polyfills/polyfills"),{}}),System.get("traceur-runtime@0.0.55/src/runtime/polyfill-import")}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:23}],chessview:[function(t,e,r){"use strict";Object.defineProperties(r,{Position:{get:function(){return n.Position}},Line:{get:function(){return o.Line}},Game:{get:function(){return i.Game}},FEN:{get:function(){return a.FEN}},fischerandom:{get:function(){return u.fischerandom}},doubleFischerandom:{get:function(){return u.doubleFischerandom}},ninesixty:{get:function(){return u.ninesixty}},__esModule:{value:!0}}),t("traceur/bin/traceur-runtime.js");var n=t("./position"),o=t("./line"),i=t("./game"),a=t("./fen"),u=t("./fischerandom")},{"./fen":7,"./fischerandom":8,"./game":9,"./line":12,"./position":17,"traceur/bin/traceur-runtime.js":108}]},{},[]);